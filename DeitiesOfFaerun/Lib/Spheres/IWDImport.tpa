
//PnP Spell Progression for Icewind Dale

ACTION_IF GAME_IS ~iwdee~ BEGIN

	COPY ~DeitiesOfFaerun/Lib/Spheres/MXSPLPAL.2da~ override

	COPY ~DeitiesOfFaerun/Lib/Spheres/MXSPLRAN.2da~ override
	
END

//Fix for Animal Summoning I (bug identified by Kotophey at Beamdog's Forum)

ACTION_IF !GAME_IS ~iwdee~ BEGIN

ACTION_IF FILE_EXISTS_IN_GAME ~SPANIM1.eff~ BEGIN

COPY_EXISTING ~SPANIM1.eff~ override
WRITE_LONG 0x01c 24	

END

END

//Fix for Chaotic Commands

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_CHAOTIC_COMMANDS[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_CHAOTIC_COMMANDS~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
LPF DELETE_EFFECT INT_VAR silent = 1 match_opcode = 101 match_parameter2 = 213                                                                           END
LPF CLONE_EFFECT  INT_VAR silent = 1 match_opcode = 296                                        STR_VAR match_resource = ~SPMINDAT~ resource = ~SPSPMAZE~ END
LPF CLONE_EFFECT  INT_VAR silent = 1 match_opcode = 101 match_parameter2 = 5 parameter2 = 213                                                            END
LPF CLONE_EFFECT  INT_VAR silent = 1 match_opcode = 169 match_parameter2 = 1 parameter2 = 78                                                             END

END

//Haste and Slow Changes

ACTION_IF !GAME_IS ~iwdee~ BEGIN

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]WIZARD_HASTE[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_HASTE~	RET	spell_res	END

COPY_EXISTING	~%spell_res%.spl~	override
SAY UNIDENTIFIED_DESC @9999271 SAY DESC @9999271
LPF DELETE_SPELL_EFFECT INT_VAR silent = 1        opcode_to_delete = 190   END
LPF CLONE_EFFECT  		INT_VAR match_opcode = 16 opcode = 190 parameter1 = 2    parameter2 = 0 END

END

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]WIZARD_SLOW[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_SLOW~	RET	spell_res	END

COPY_EXISTING	~%spell_res%.spl~	override
SAY UNIDENTIFIED_DESC @9999272 SAY DESC @9999272
LPF DELETE_SPELL_EFFECT INT_VAR silent = 1        opcode_to_delete = 190   END
LPF CLONE_EFFECT  		INT_VAR match_opcode = 40 opcode = 190 parameter1 = ~-2~ parameter2 = 0 END

END

END

//Iron Skin Changes

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_IRONSKIN[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_IRONSKIN~	RET	spell_res	END

COPY_EXISTING	~%spell_res%.spl~	override
SAY UNIDENTIFIED_DESC @9999227 SAY DESC @9999227	
LPF	ALTER_SPELL_HEADER	INT_VAR	target = 1 END
LPF ALTER_EFFECT  		INT_VAR match_opcode = 218 target = 2 END
LPF ALTER_EFFECT  		INT_VAR match_opcode = 215 target = 2 END
LPF ALTER_EFFECT  		INT_VAR match_opcode = 174 target = 2 END
LPF ALTER_EFFECT  		INT_VAR match_opcode = 50  target = 2 END

END

//Identify Changes

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]WIZARD_IDENTIFY[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_IDENTIFY~	RET	spell_res	END

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999225) STR_VAR bam_file = RAIDENIC RET iconiden = icon   END
COPY_EXISTING	~%spell_res%.spl~	override
SAY UNIDENTIFIED_DESC @9999226 SAY DESC @9999226	
LPF	ALTER_SPELL_HEADER	INT_VAR	target = 5 range = 0 END
LPF ALTER_EFFECT  		INT_VAR match_opcode = 21 target = 2   timing = 0 duration = 60 parameter1 = 250 parameter2 = 1 resist_dispel = 3 END
LPF	CLONE_EFFECT	    INT_VAR match_opcode = 21 opcode = 142 parameter1 = 0   parameter2 = iconiden resist_dispel = 3 				  END
LPF	CLONE_EFFECT	    INT_VAR match_opcode = 21 opcode = 174 timing = 4 duration = 60 parameter1 = 0   parameter2 = 0 resist_dispel = 3 STR_VAR resource = ~EFF_E04~ END

COPY "DeitiesOfFaerun\Lib\Spheres\Import\Common\RAIDENIC.BAM" override

END

//Bless for non-Evil only

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_BLESS[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_BLESS~	RET	spell_res	END

COPY_EXISTING	~%spell_res%.spl~	override
WRITE_LONG 0x1e (THIS BOR 0x2)
IF_EXISTS

END

//Curse for non-Good only

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_CURSE[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_CURSE~	RET	spell_res	END

COPY_EXISTING	~%spell_res%.spl~	override
WRITE_LONG 0x1e (THIS BOR 0x4)
IF_EXISTS

END

//Hold Animal -> Hold Person or Mammal

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_HOLD_ANIMAL[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_HOLD_ANIMAL~	RET	spell_res	END

COPY_EXISTING	~%spell_res%.spl~	override
	LPF	CLONE_EFFECT
		INT_VAR
			match_opcode = 175	
			match_parameter2 = 3
			match_parameter1 = 2
			parameter1 = 1
			silent = 1
	END
	LPF	CLONE_EFFECT
		INT_VAR
			match_opcode = 177
			match_parameter2 = 3
			match_parameter1 = 2
			parameter1 = 1
			silent = 1
	END
	LPF	ALTER_EFFECT
		INT_VAR
			match_opcode = 324
			match_parameter2 = 8
			parameter2 = 22
			silent = 1
	END
	LPF	ALTER_EFFECT
		INT_VAR
			match_opcode = 318
			match_parameter2 = 8
			parameter2 = 22
			silent = 1
	END
	
COPY_EXISTING ~IDPRO249.pro~ override
	WRITE_SHORT	0x3e	22
IF_EXISTS

END

//Silence provides MS boost

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_SILENCE_15_FOOT[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_SILENCE_15_FOOT~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
LPF	CLONE_EFFECT INT_VAR match_opcode = 38 opcode = 59 parameter1 = 100 parameter2 = 0   END

END

//PnP Magic Resistance

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_MAGIC_RESISTANCE[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_MAGIC_RESISTANCE~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY UNIDENTIFIED_DESC @9999282 SAY DESC @9999283
LPF	ALTER_SPELL_HEADER	INT_VAR	target = 5 range = 0 END

END

//Resurrection only works on dead person

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_RESURRECTION[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_RESURRECTION~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY DESC @9999284
LPF	ADD_SPELL_EFFECT INT_VAR opcode = 324 parameter1 = 2048 parameter2 = 139 timing = 1 target = 2 STR_VAR resource = EVAL ~%spell_res%~ insert_point = 0 END

END

//Fix for Physical Mirror (bug identified by Kotophey at Beamdog's Forum)

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_PHYSICAL_MIRROR[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_PHYSICAL_MIRROR~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
LPF ALTER_EFFECT INT_VAR silent = 1 match_timing = 2 timing = 0 duration = 54 END

END

//Fix for Ice Storm (bug identified by Ligg at Beamdog's Forum)

ACTION_IF !GAME_IS ~iwdee~ BEGIN

COPY_EXISTING ~icestorm.pro~ override
WRITE_BYTE 0x00216 4
BUT_ONLY_IF_IT_CHANGES

END

//Solves issue for Minor Sequencer, Sequencer, Spell Trigger, Contingency and Chain Contingency

COPY_EXISTING	~UI.MENU~	override
	REPLACE_TEXTUALLY	~mageBookEnabled == false~ ~((mageBookEnabled == false) and not (bookMode == 1))~
	REPLACE_TEXTUALLY EXACT_MATCH ~mageScreen:SequenceSpell( bookSpells[currentBookSpell].resref )~ ~mageScreen:SequenceSpell( bookSpells[currentBookSpell].resref, bookSpells[currentBookSpell].masterResref )~
	REPLACE_TEXTUALLY EXACT_MATCH ~mageScreen:UnSequenceSpell( bottomSpells[currentBottomSpell].resref )~ ~mageScreen:UnSequenceSpell( bottomSpells[currentBottomSpell].resref, bottomSpells[currentBottomSpell].masterResref )~
BUT_ONLY

//No touching-effect through Mirror Image, Reflect Image, Iron Skin and Stoneskin - by Kjeron (part II)

		LAF	GET_AOE_PROJ RET_ARRAY proList END
		LAF	INDEX_EFFS	 INT_VAR sub = 0 RET_ARRAY eff25List eff78List eff109List eff216List effDispelList END
		LAF	INDEX_SPELLS INT_VAR sub = 0 RET_ARRAY spl25List spl78List spl109List spl216List splDispelList END
		LAF	INDEX_SPELLS INT_VAR sub = 1 RET_ARRAY spl25List spl78List spl109List spl216List splDispelList END
		LAF	INDEX_EFFS	 INT_VAR sub = 1 RET_ARRAY eff25List eff78List eff109List eff216List effDispelList END
		
		LAF	ADD_SPLPROT	INT_VAR	stat = 273 value = 0x40000000 relation = 8         RET mirror	  = new_row END
		LAF	ADD_SPLPROT	INT_VAR stat = 88  value = 0	      relation = 5	       RET stoneskin  = new_row END
		LAF	ADD_SPLPROT	INT_VAR stat = 199 value = 0	      relation = 5	       RET golemskin  = new_row END
		LAF	ADD_SPLPROT	INT_VAR stat = 259 value = stoneskin  relation = golemskin RET anyskin    = new_row END
		LAF	ADD_SPLPROT	INT_VAR stat = 259 value = mirror     relation = anyskin   RET mirrorskin = new_row END
		
		LAF	ADD_SPLPROT	INT_VAR stat = 88  value = 0	      relation = 5	       RET stoneskin  = new_row END
		LAF	ADD_SPLPROT	INT_VAR stat = 199 value = 0	      relation = 5	       RET golemskin  = new_row END
		LAF	ADD_SPLPROT	INT_VAR stat = 259 value = stoneskin  relation = golemskin RET anyskin    = new_row END
				
		LAF	MODIFY_POISON_WEAPON INT_VAR parameter2 = mirrorskin END
		
		COPY_EXISTING_REGEXP ~^.+\.itm$~ override TO_UPPER SOURCE_RES
		PATCH_MATCH	SHORT_AT 0x1c WITH 1 2 3 4 6 7 8 9 10 11 12 13 32 33 34 35 36 37 38 39 40 BEGIN END
		DEFAULT
			PATCH_MATCH	~%SOURCE_RES%~	WITH
				~AROW07~ ~AX1H07~ ~REAVER~ ~OHREAVER~ ~SW1H60~ ~SW1H61~ ~CARSOMYR~ ~SW2H10~ ~SW2H19~ ~DEVA~ ~DEVAEVIL~ ~OHNHAMM1~ ~OHNSLNG1~ ~STAF11~ BEGIN	END
				DEFAULT		
				LPF	BLOCK_EFFECTS INT_VAR parameter2 = mirror aoe_gaze = 1 END
			END
		END
	BUT_ONLY
		
		COPY_EXISTING_REGEXP ~.*\.itm$~ override LPF BLOCK_EFFECT INT_VAR opcode = 25 parameter2 = mirrorskin END BUT_ONLY
	    COPY_EXISTING_REGEXP ~.*\.itm$~ override LPF BLOCK_EFFECT INT_VAR opcode = 78 parameter2 = anyskin	  END BUT_ONLY
	
		LAF	INDEX_EFFS	 INT_VAR sub = 0 RET_ARRAY eff25List eff78List eff109List eff216List effDispelList END
	    LAF	INDEX_SPELLS INT_VAR sub = 0 RET_ARRAY spl25List spl78List spl109List spl216List splDispelList END
	    LAF	INDEX_SPELLS INT_VAR sub = 1 RET_ARRAY spl25List spl78List spl109List spl216List splDispelList END
	    LAF	INDEX_EFFS	 INT_VAR sub = 1 RET_ARRAY eff25List eff78List eff109List eff216List effDispelList END
	
/* Importing IWD Spells */

ACTION_IF ((!GAME_IS ~iwdee~) AND ((!MOD_IS_INSTALLED ~spells/SetUp-spells.tp2~ ~0~) OR (!MOD_IS_INSTALLED ~Iwdification/setup-iwdification.tp2~ ~0~))) BEGIN

//Curse

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_CURSE[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Curse/IDPRO237.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Curse/SPPR112.spl~ 1 1 CLERIC_CURSE
SAY NAME1 @999946 SAY NAME2 @999946 SAY UNIDENTIFIED_DESC @999947 SAY DESC @999947
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
WRITE_LONG	    0x1e (THIS BOR 0x4)
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO237% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT       INT_VAR match_opcode = 139 match_parameter1 = 14406 parameter1 = EVAL "%RA_Cursed%" END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Curse/SPPR112B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Curse/SPPR112C.BAM~	~override\%spell_res%C.BAM~

END

//Prayer

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_PRAYER[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Prayer/OHVRNP.PRO~

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Prayer/OHVRPO.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Prayer/SPPR316.spl~ 1 3 CLERIC_PRAYER
SAY NAME1 @999948 SAY NAME2 @999948 SAY UNIDENTIFIED_DESC @999949 SAY DESC @999949
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Prayer/SPPR316B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Prayer/SPPR316C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Prayer/#PRAYERB.SPL~ override
LPF ALTER_SPELL_HEADER INT_VAR projectile = %OHVRNP% END
LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 40257 parameter1 = EVAL "%RA_Penalty%" END

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@999947) STR_VAR bam_file = RAALLIC RET iconpray = icon END
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Prayer/#PRAYERG.SPL~ override
LPF ALTER_SPELL_HEADER INT_VAR projectile = %OHVRPO% END
LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 40256 parameter1 = EVAL "%RA_Bonus%" END
LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 183   parameter2 = iconpray END

END

//Recitation

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_RECITATION[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Recitation/OHVRNP.PRO~

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Recitation/OHVRPO.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Recitation/SPPR421.spl~ 1 4 CLERIC_RECITATION
SAY NAME1 @999950 SAY NAME2 @999950 SAY UNIDENTIFIED_DESC @999951 SAY DESC @999951
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Recitation/SPPR421B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Recitation/SPPR421C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Recitation/#RECITEB.SPL~ override
LPF ALTER_SPELL_HEADER INT_VAR projectile = %OHVRNP% END
LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 40257 parameter1 = EVAL "%RA_Penalty%" END

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@999949) STR_VAR bam_file = RAALLIC RET iconreci = icon END
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Recitation/#RECITEG.SPL~ override
LPF ALTER_SPELL_HEADER INT_VAR projectile = %OHVRPO% END
LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 40256 parameter1 = EVAL "%RA_Bonus%" END
LPF ALTER_EFFECT INT_VAR match_opcode = 142 match_parameter2 = 175   parameter2 = iconreci END

END

//Cure Moderate Wounds

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_CURE_MODERATE_WOUNDS[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/CureModerateWounds/SPPR217.spl~ 1 2 CLERIC_CURE_MODERATE_WOUNDS
SAY NAME1 @999952 SAY NAME2 @999952 SAY UNIDENTIFIED_DESC @999953 SAY DESC @999953
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/CureModerateWounds/SPPR217B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/CureModerateWounds/SPPR217C.BAM~	~override\%spell_res%C.BAM~

END

//Circle of Bones

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_CIRCLE_OF_BONES[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/CircleofBones/SMLLARNC.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/CircleofBones/SPPR323.spl~ 1 3 CLERIC_CIRCLE_OF_BONES
SAY NAME1 @999954 SAY NAME2 @999954 SAY UNIDENTIFIED_DESC @999955 SAY DESC @999955
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR 			   match_resource = EVAL ~%SOURCE_RES%D~  resource = EVAL ~%spell_res%D~	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/CircleofBones/SPPR323B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/CircleofBones/SPPR323C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/CircleofBones/SPPR323D.SPL~	~override\%spell_res%D.SPL~
LPF ALTER_SPELL_HEADER INT_VAR projectile = %SMLLARNC% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~SPPR323~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~   resource = EVAL ~%spell_res%D~	END

END

//Darts of Bone

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_DARTS_OF_BONE[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/DartsofBone/SPWI630.spl~ 2 6 WIZARD_DARTS_OF_BONE
SAY NAME1 @999956 SAY NAME2 @999956 SAY UNIDENTIFIED_DESC @999957 SAY DESC @999957
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/DartsofBone/SPWI630B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/DartsofBone/SPWI630C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/DartsofBone/DOBONE.ITM~	override
SAY NAME1 @999958 SAY NAME2 @999958

END

//Lich Touch

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_LICH_TOUCH[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/LichTouch/SPWI626.spl~ 2 6 WIZARD_LICH_TOUCH
SAY NAME1 @999959 SAY NAME2 @999959 SAY UNIDENTIFIED_DESC @999960 SAY DESC @999960
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/LichTouch/SPWI626B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/LichTouch/SPWI626C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/LichTouch/LTOUCH.ITM~	override
SAY NAME1 @999959 SAY NAME2 @999959
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35606 parameter1 = EVAL "%RA_Held%" END
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35542 parameter1 = EVAL "%RA_Paralyzed%" END
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35484 parameter1 = EVAL "%RA_Panic%" END
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 20568 parameter1 = EVAL "%RA_MoralFail%" END

END

//Soul Eater

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_SOUL_EATER[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SoulEater/IDPRO299.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SoulEater/SPWI631.spl~ 2 6 WIZARD_SOUL_EATER
SAY NAME1 @999961 SAY NAME2 @999961 SAY UNIDENTIFIED_DESC @999962 SAY DESC @999962
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~WIZARD_SOUL_EATER~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO299% END
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR 			   match_resource = EVAL ~%SOURCE_RES%B~  resource = EVAL ~%spell_res%B~	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SoulEater/SPWI631B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SoulEater/SPWI631C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SoulEater/SPWI631B.SPL~	~override\%spell_res%B.SPL~
LPF	ALTER_EFFECT	   STR_VAR silent = 1         match_resource = EVAL ~SPWI631~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~    resource = EVAL ~%spell_res%B~	END


COPY ~DeitiesofFaerun/Lib/Spheres/Import/SoulEater/AD3SKLM.CRE~	override
SAY NAME1 @999963 SAY NAME2 @999963

END

//Shadow Monsters

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_SHADOW_MONSTERS[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_summon_table STR_VAR descript = "SHADOW_MONSTERS" 2da_file = SMONSTE RET SMONSTE = table END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SPWI426.spl~ 2 4 WIZARD_SHADOW_MONSTERS
SAY NAME1 @999964 SAY NAME2 @999964 SAY UNIDENTIFIED_DESC @999965 SAY DESC @999965
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT	   INT_VAR match_opcode = 331 parameter2 = SMONSTE END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SPWI426B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SPWI426C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SMONSTE.2DA~	override

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SS1GOB1.CRE~	override
SAY NAME1 @999966 SAY NAME2 @999966

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SS1GOB2.CRE~	override
SAY NAME1 @999966 SAY NAME2 @999966

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SS1GOB3.CRE~	override
SAY NAME1 @999966 SAY NAME2 @999966

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SS1LIZ3.CRE~	override
SAY NAME1 @999967 SAY NAME2 @999967

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SS1LIZ4.CRE~	override
SAY NAME1 @999967 SAY NAME2 @999967

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SS1TRL6.CRE~	override
SAY NAME1 @999968 SAY NAME2 @999968

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SS1TRL7.CRE~	override
SAY NAME1 @999968 SAY NAME2 @999968

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShadowMonsters/SS1TRL8.CRE~	override
SAY NAME1 @999968 SAY NAME2 @999968

END

//Demi-shadow Monsters

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_DEMI_SHADOW_MONSTERS[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_summon_table STR_VAR descript = "DEMI_SHADOW_MONSTERS" 2da_file = DSMONST RET DSMONST = table END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/DemiShadowMonster/SPWI525.spl~ 2 5 WIZARD_DEMI_SHADOW_MONSTERS
SAY NAME1 @999969 SAY NAME2 @999969 SAY UNIDENTIFIED_DESC @999970 SAY DESC @999970
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT	   INT_VAR match_opcode = 331 parameter2 = DSMONST END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/DemiShadowMonster/SPWI525B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/DemiShadowMonster/SPWI525C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/DemiShadowMonster/DSMONST.2DA~	    override

COPY ~DeitiesofFaerun/Lib/Spheres/Import/DemiShadowMonster/SS2GOB1.CRE~	    override
SAY NAME1 @999971 SAY NAME2 @999971

COPY ~DeitiesofFaerun/Lib/Spheres/Import/DemiShadowMonster/SS2GOB2.CRE~		override
SAY NAME1 @999971 SAY NAME2 @999971

COPY ~DeitiesofFaerun/Lib/Spheres/Import/DemiShadowMonster/SS2GOB3.CRE~		override
SAY NAME1 @999971 SAY NAME2 @999971

COPY ~DeitiesofFaerun/Lib/Spheres/Import/DemiShadowMonster/SS2LIZ5.CRE~		override
SAY NAME1 @999972 SAY NAME2 @999972

COPY ~DeitiesofFaerun/Lib/Spheres/Import/DemiShadowMonster/SS2LIZ6.CRE~		override
SAY NAME1 @999972 SAY NAME2 @999972

COPY ~DeitiesofFaerun/Lib/Spheres/Import/DemiShadowMonster/SS2LIZ7.CRE~		override
SAY NAME1 @999972 SAY NAME2 @999972

END

//Shades

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_SHADES[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_summon_table STR_VAR descript = "SHADES" 2da_file = SHADES RET SHADES = table END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Shades/SPWI629.spl~ 2 6 WIZARD_SHADES
SAY NAME1 @999973 SAY NAME2 @999973 SAY UNIDENTIFIED_DESC @999974 SAY DESC @999974
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT	   INT_VAR match_opcode = 331 parameter2 = SHADES END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shades/SPWI629B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shades/SPWI629C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shades/SHADES.2DA~	    override

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shades/SS3TRL7.CRE~	override
SAY NAME1 @999968 SAY NAME2 @999968

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shades/SS3TRL8.CRE~	override
SAY NAME1 @999968 SAY NAME2 @999968

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shades/SS3UMB8.CRE~	override
SAY NAME1 @999975 SAY NAME2 @999975

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shades/SS3UMB9.CRE~	override
SAY NAME1 @999975 SAY NAME2 @999975

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shades/REG1HP2.ITM~	override
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35600 parameter1 = EVAL "%RA_UndeadD%" END
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35591 parameter1 = EVAL "%RA_Death%"   END
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35592 parameter1 = EVAL "%RA_Vorpal%"  END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shades/CDIWDTR1.SPL~	override
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 35593 parameter1 = EVAL "%RA_Diseased%" END
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 39752 parameter1 = EVAL "%RA_FoulDisease%" END
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 36317 parameter1 = EVAL "%RA_Poison%" END
LPF ALTER_EFFECT INT_VAR match_opcode = 267 match_parameter1 = 37607 parameter1 = EVAL "%RA_Poisoned%" END

END

//Summon Shadow

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_SUMMON_SHADOW[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_summon_table STR_VAR descript = "SUMMON_SHADOW" 2da_file = SSHADOW RET SSHADOW = table END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SummonShadow/SPWI526.spl~ 2 5 WIZARD_SUMMON_SHADOW
SAY NAME1 @999976 SAY NAME2 @999976 SAY UNIDENTIFIED_DESC @999977 SAY DESC @999977
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT	   INT_VAR match_opcode = 331 parameter2 = SSHADOW END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SummonShadow/SPWI526B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SummonShadow/SPWI526C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SummonShadow/SSHADOW.2DA~	override

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SummonShadow/SUMSHAD.CRE~	override
SAY NAME1 @999978 SAY NAME2 @999978

END

//Cause Light Wounds

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_CAUSE_LIGHT_WOUNDS[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/CauseLightWounds/SPPR114.spl~ 1 1 CLERIC_CAUSE_LIGHT_WOUNDS
SAY NAME1 @999979 SAY NAME2 @999979 SAY UNIDENTIFIED_DESC @999980 SAY DESC @999980
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/CauseLightWounds/SPPR114B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/CauseLightWounds/SPPR114C.BAM~	~override\%spell_res%C.BAM~

END

//Cause Moderate Wounds

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_CAUSE_MODERATE_WOUNDS[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/CauseModerateWounds/SPPR220.spl~ 1 2 CLERIC_CAUSE_MODERATE_WOUNDS
SAY NAME1 @999981 SAY NAME2 @999981 SAY UNIDENTIFIED_DESC @999982 SAY DESC @999982
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/CauseModerateWounds/SPPR220B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/CauseModerateWounds/SPPR220C.BAM~	~override\%spell_res%C.BAM~

END

//Cause Disease

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_CAUSE_DISEASE[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/CauseDisease/SPPR320.spl~ 1 3 CLERIC_CAUSE_DISEASE
SAY NAME1 @999983 SAY NAME2 @999983 SAY UNIDENTIFIED_DESC @999984 SAY DESC @999984
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/CauseDisease/SPPR320B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/CauseDisease/SPPR320C.BAM~	~override\%spell_res%C.BAM~

END

//Mold Touch

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_MOLD_TOUCH[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/MoldTouch/IDMOLD.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/MoldTouch/SPPR326.spl~ 1 3 CLERIC_MOLD_TOUCH
SAY NAME1 @999985 SAY NAME2 @999985 SAY UNIDENTIFIED_DESC @999986 SAY DESC @999986
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_MOLD_TOUCH~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/MoldTouch/SPPR326B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/MoldTouch/SPPR326C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/MoldTouch/SPPR326B.spl~	~override\%spell_res%B.spl~
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDMOLD% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~SPPR326~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR	           match_resource = EVAL ~%SOURCE_RES%~   resource = EVAL ~%spell_res%B~	END

END

//Cloud of Pestilence

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_CLOUD_OF_PESTILENCE[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/CloudofPestilance/IDPRO309.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/CloudofPestilance/SPPR423.spl~ 1 4 CLERIC_CLOUD_OF_PESTILENCE
SAY NAME1 @999987 SAY NAME2 @999987 SAY UNIDENTIFIED_DESC @999988 SAY DESC @999988
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_CLOUD_OF_PESTILENCE~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO309% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 37800 parameter1 = EVAL "%RA_Blinded%" END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/CloudofPestilance/SPPR423B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/CloudofPestilance/SPPR423C.BAM~	~override\%spell_res%C.BAM~

END

//Suffocate

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_SUFFOCATE[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Suffocate/IDPRO317.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Suffocate/SPWI726.spl~ 2 7 WIZARD_SUFFOCATE
SAY NAME1 @999989 SAY NAME2 @999989 SAY UNIDENTIFIED_DESC @999990 SAY DESC @999990
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~WIZARD_SUFFOCATE~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO317% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Suffocate/SPWI726B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Suffocate/SPWI726C.BAM~	~override\%spell_res%C.BAM~

END

//Symbol, Pain

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_SYMBOL_OF_PAIN[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SymbolPain/ICGHIT.PRO~

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SymbolPain/ICEGLYP.PRO~

COPY_EXISTING	~ICEGLYP.PRO~	override
WRITE_SHORT 0x0214 ICGHIT

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@2215) STR_VAR bam_file = RAPAINIC RET iconpain = icon END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SymbolPain/SPPR714.spl~ 1 7 CLERIC_SYMBOL_OF_PAIN
SAY NAME1 @999991 SAY NAME2 @999991 SAY UNIDENTIFIED_DESC @999992 SAY DESC @999992
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %ICEGLYP% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 18628 parameter1 = RESOLVE_STR_REF (@2215) END
LPF ALTER_EFFECT  	   INT_VAR match_opcode = 142 match_parameter2 = 169 parameter2 = iconpain END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SymbolPain/SPPR714B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SymbolPain/SPPR714C.BAM~	~override\%spell_res%C.BAM~

END

//Giant Insects

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_GIANT_INSECT[ %TAB%%WNL%$]~) BEGIN

LAF ADD_PROJECTL STR_VAR path = ~DeitiesofFaerun/Lib/Spheres/Import/GiantInsect~ file = ~IDPRO282~ missile = ~Acid Spray~ RET acidspra  = IDPRO282 END

COPY_EXISTING	~IDPRO282.PRO~	override
WRITE_LONG 0x0030 RESOLVE_STR_REF (@999997)

LAF cd_new_summon_table STR_VAR descript = "GIANT_INSECT" 2da_file = GINSECT RET GINSECT = table END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/GiantInsect/SPPR418.spl~ 1 4 CLERIC_GIANT_INSECT
SAY NAME1 @999993 SAY NAME2 @999993 SAY UNIDENTIFIED_DESC @999994 SAY DESC @999994
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT	   INT_VAR match_opcode = 331 parameter2 = GINSECT END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/GiantInsect/SPPR418B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/GiantInsect/SPPR418C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/GiantInsect/GINSECT.2DA~	override

COPY ~DeitiesofFaerun/Lib/Spheres/Import/GiantInsect/GISBORB.CRE~	override
SAY NAME1 @999995 SAY NAME2 @999995

COPY ~DeitiesofFaerun/Lib/Spheres/Import/GiantInsect/GISBOMB.CRE~	override
SAY NAME1 @999996 SAY NAME2 @999996

COPY ~DeitiesofFaerun/Lib/Spheres/Import/GiantInsect/SPIN191.spl~	override
LPF ALTER_SPELL_HEADER INT_VAR projectile = acidspra END

LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 34527 parameter1 = RESOLVE_STR_REF (@999997) END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 35568 parameter1 = EVAL "%RA_Stunned%" END

END

//Sunscorch

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_SUNSCORCH[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Sunscorch/SUNSCOH.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Sunscorch/SPPR115.spl~ 1 1 CLERIC_SUNSCORCH
SAY NAME1 @999998 SAY NAME2 @999998 SAY UNIDENTIFIED_DESC @999999 SAY DESC @999999
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_SUNSCORCH~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %SUNSCOH% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR 			   match_resource = EVAL ~%SOURCE_RES%D~  resource = EVAL ~%spell_res%D~	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 37800 parameter1 = EVAL "%RA_Blinded%" END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Sunscorch/SPPR115B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Sunscorch/SPPR115C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Sunscorch/SPPR115D.spl~	~override\%spell_res%D.spl~
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~SPPR115~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~   resource = EVAL ~%spell_res%D~	END

END

//Undead Ward

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_UNDEAD_WARD[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/UndeadWard/UWARD.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/UndeadWard/SPPR521.spl~ 1 5 CLERIC_UNDEAD_WARD
SAY NAME1 @9999100 SAY NAME2 @9999100 SAY UNIDENTIFIED_DESC @9999101 SAY DESC @9999101
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %UWARD% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/UndeadWard/SPPR521B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/UndeadWard/SPPR521C.BAM~	~override\%spell_res%C.BAM~

END

//Expeditious Retreat

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_EXPEDITIOUS_RETREAT[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/ExpeditiousRetreat/SPWI126.spl~ 2 1 WIZARD_EXPEDITIOUS_RETREAT
SAY NAME1 @9999102 SAY NAME2 @9999102 SAY UNIDENTIFIED_DESC @9999103 SAY DESC @9999103
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37787 parameter1 = EVAL "%RA_Slowed%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37638 parameter1 = EVAL "%RA_Slow%"   END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 36035 parameter1 = EVAL "%RA_Hasted%" END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ExpeditiousRetreat/SPWI126B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/ExpeditiousRetreat/SPWI126C.BAM~	~override\%spell_res%C.BAM~

END

//Unfailing Endurance

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_UNFAILING_ENDURANCE[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/UnfailingEndurance/SPPR424.spl~ 1 4 CLERIC_UNFAILING_ENDURANCE
SAY NAME1 @9999104 SAY NAME2 @9999104 SAY UNIDENTIFIED_DESC @9999105 SAY DESC @9999105
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/UnfailingEndurance/SPPR424B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/UnfailingEndurance/SPPR424C.BAM~	~override\%spell_res%C.BAM~

END

//Moonblade

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_MOONBLADE[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesOfFaerun/Lib/Spheres/Import/Moonblade/SPPR322.spl~ 1 3 CLERIC_MOONBLADE
SAY NAME1 @9999106 SAY NAME2 @9999106 SAY UNIDENTIFIED_DESC @9999107 SAY DESC @9999107
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Moonblade/SPPR322B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Moonblade/SPPR322C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Moonblade/MOONBLA.ITM~	override
SAY NAME1 @9999106 SAY NAME2 @9999106 SAY UNIDENTIFIED_DESC @9999106 SAY DESC @9999106

END

//Wall of Moonlight

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_WALL_OF_MOONLIGHT[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/WallofMoonlight/WOMOON.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/WallofMoonlight/SPPR428.spl~ 1 4 CLERIC_WALL_OF_MOONLIGHT
SAY NAME1 @9999108 SAY NAME2 @9999108 SAY UNIDENTIFIED_DESC @9999109 SAY DESC @9999109
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_WALL_OF_MOONLIGHT~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %WOMOON% END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%A~	  resource = EVAL ~%spell_res%A~	END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%B~	  resource = EVAL ~%spell_res%B~	END


COPY ~DeitiesofFaerun/Lib/Spheres/Import/WallofMoonlight/SPPR428B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/WallofMoonlight/SPPR428C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/WallofMoonlight/SPPR428A.spl~	~override\%spell_res%A.spl~
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~SPPR322~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~   resource = EVAL ~%spell_res%A~	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/WallofMoonlight/SPPR428B.spl~	~override\%spell_res%B.spl~
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~SPPR322~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~   resource = EVAL ~%spell_res%B~	END

END

//Star Metal Cudgel

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_STAR_METAL_CUDGEL[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesOfFaerun/Lib/Spheres/Import/StarMetalCudgel/SPPR425.spl~ 1 4 CLERIC_STAR_METAL_CUDGEL
SAY NAME1 @9999110 SAY NAME2 @9999110 SAY UNIDENTIFIED_DESC @9999111 SAY DESC @9999111
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/StarMetalCudgel/SPPR425B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/StarMetalCudgel/SPPR425C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/StarMetalCudgel/SMCUDGE.ITM~	override
SAY NAME1 @9999110 SAY NAME2 @9999110 SAY UNIDENTIFIED_DESC @9999110 SAY DESC @9999110

END

//Emotion, Fear

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_EMOTION_FEAR[ %TAB%%WNL%$]~) BEGIN

	ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Common/IDPRO255.PRO~

ADD_SPELL ~DeitiesOfFaerun/Lib/Spheres/Import/EmotionFear/SPWI428.spl~ 2 4 WIZARD_EMOTION_FEAR
SAY NAME1 @9999112 SAY NAME2 @9999112 SAY UNIDENTIFIED_DESC @9999113 SAY DESC @9999113
TEXT_SPRINT	 spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~WIZARD_EMOTION_FEAR~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO255% END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 35484 parameter1 = EVAL "%RA_Panic%" END
LPF ALTER_EFFECT       INT_VAR match_opcode = 321 STR_VAR match_resource = ~SPWI427~ resource = ~XXWI427~ END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/EmotionFear/SPWI428B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/EmotionFear/SPWI428C.BAM~	~override\%spell_res%C.BAM~

END

//Emotion, Courage

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_EMOTION_COURAGE[ %TAB%%WNL%$]~) BEGIN

	ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Common/IDPRO407.PRO~

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999116) STR_VAR bam_file = RACOURAG RET iconcour = icon END
ADD_SPELL ~DeitiesOfFaerun/Lib/Spheres/Import/EmotionCourage/SPWI427.spl~ 2 4 WIZARD_EMOTION_COURAGE
SAY NAME1 @9999114 SAY NAME2 @9999114 SAY UNIDENTIFIED_DESC @9999115 SAY DESC @9999115
TEXT_SPRINT	 spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO407% END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT  	   INT_VAR match_opcode = 142 match_parameter2 = 187 parameter2 = iconcour END
LPF	ALTER_EFFECT	   INT_VAR match_opcode = 321 STR_VAR match_resource = ~SPWI428~ resource = EVAL $res_of_label(~WIZARD_EMOTION_FEAR~)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/EmotionCourage/SPWI427B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/EmotionCourage/SPWI427C.BAM~	~override\%spell_res%C.BAM~

COPY_EXISTING ~%res_of_label_WIZARD_EMOTION_FEAR%.spl~ override
LPF ALTER_EFFECT INT_VAR match_opcode = 321 STR_VAR match_resource = ~XXWI427~ resource = EVAL ~%spell_res%~ END

END

//Symbol, Hopelessness

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_SYMBOL_OF_HOPELESSNESS[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SymbolHopelessness/IDPRO277.PRO~

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SymbolHopelessness/ICGHIT.PRO~

COPY_EXISTING	~IDPRO277.PRO~	override
WRITE_SHORT 0x0214 ICGHIT

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SymbolHopelessness/SPPR716.spl~ 1 7 CLERIC_SYMBOL_OF_HOPELESSNESS
SAY NAME1 @9999117 SAY NAME2 @9999117 SAY UNIDENTIFIED_DESC @9999118 SAY DESC @9999118
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_SYMBOL_OF_HOPELESSNESS~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO277% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 1280  parameter1 = EVAL "%RA_Stunned%"  END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 14980 parameter1 = EVAL "%RA_Hopeless%" END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SymbolHopelessness/SPPR716B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SymbolHopelessness/SPPR716C.BAM~	~override\%spell_res%C.BAM~

END

//Emotion, Hopelessness

LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~WIZARD_EMOTION_HOPELESSNESS~ RET spell_res END

	ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Common/IDPRO255.PRO~

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999119 SAY NAME2 @9999119 SAY UNIDENTIFIED_DESC @9999120 SAY DESC @9999120
LPF ALTER_SPELL_HEADER  INT_VAR projectile = %IDPRO255% END
LPF DELETE_SPELL_EFFECT INT_VAR opcode_to_delete = ~-1~                                                                                                                                                       END
LPF ADD_SPELL_EFFECT    INT_VAR opcode = 321 target = 2            duration = 1                                                                                STR_VAR resource = ~XXWI429~  insert_point = 0 END
LPF ADD_SPELL_EFFECT    INT_VAR opcode = 174 target = 2 timing = 1                                                 power = 4 savingthrow = 1 resist_dispel = 1 STR_VAR resource = ~#EFF_M05~ insert_point = 1 END
LPF ADD_SPELL_EFFECT    INT_VAR opcode = 139 target = 2 timing = 1               parameter1 = EVAL "%RA_Hopeless%" power = 4 savingthrow = 1 resist_dispel = 1 STR_VAR                       insert_point = 2 END
LPF ADD_SPELL_EFFECT    INT_VAR opcode =  39 target = 2            duration = 60 parameter2 = 1                    power = 4 savingthrow = 1 resist_dispel = 1 STR_VAR                       insert_point = 3 END
LPF ADD_SPELL_EFFECT    INT_VAR opcode = 174 target = 2 timing = 4 duration = 60                                   power = 4 savingthrow = 1 resist_dispel = 1 STR_VAR resource = ~#EFF_E05~ insert_point = 4 END
LPF ADD_SPELL_EFFECT    INT_VAR opcode = 142 target = 2            duration = 60 parameter2 = 44                   power = 4 savingthrow = 1 resist_dispel = 1 STR_VAR                       insert_point = 5 END
LPF ADD_SPELL_EFFECT    INT_VAR opcode = 174 target = 2 timing = 1                                                 power = 4 savingthrow = 1 resist_dispel = 1 STR_VAR resource = ~PARALH~   insert_point = 6 END

//Emotion, Hope

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_EMOTION_HOPE[ %TAB%%WNL%$]~) BEGIN

	ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Common/IDPRO407.PRO~

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999123) STR_VAR bam_file = RAHOPEIC RET iconhope = icon END
ADD_SPELL ~DeitiesOfFaerun/Lib/Spheres/Import/EmotionHope/SPWI429.spl~ 2 4 WIZARD_EMOTION_HOPE
SAY NAME1 @9999121 SAY NAME2 @9999121 SAY UNIDENTIFIED_DESC @9999122 SAY DESC @9999122
TEXT_SPRINT	 spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO407% END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT  	   INT_VAR match_opcode = 142 match_parameter2 = 186 parameter2 = iconhope END
LPF	ALTER_EFFECT	   INT_VAR match_opcode = 321 STR_VAR match_resource = ~SPPR716~ resource = EVAL $res_of_label(~CLERIC_SYMBOL_OF_HOPELESSNESS~)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/EmotionHope/SPWI429B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/EmotionHope/SPWI429C.BAM~	~override\%spell_res%C.BAM~

COPY_EXISTING ~SPWI411.spl~ override
LPF ALTER_EFFECT INT_VAR match_opcode = 321 STR_VAR match_resource = ~XXWI429~ resource = EVAL ~%spell_res%~ END

END

//Force Missiles

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_MORDENKAINENS_FORCE_MISSILES[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/MordenkainenForceMissiles/MFMISS.PRO~

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/MordenkainenForceMissiles/SMLLAREA.PRO~

LAF ADD_PROJECTL                   STR_VAR path = ~DeitiesOfFaerun/Lib/Spheres/Import/MordenkainenForceMissiles~	file = ~MFMISS2~ missile = ~Force Missile 2~ RET mordy_2  = MFMISS2 END
LAF ADD_PROJECTL INT_VAR clone = 1 STR_VAR path = ~DeitiesOfFaerun/Lib/Spheres/Import/MordenkainenForceMissiles~	file = ~MFMISS2~ missile = ~Force Missile 2~ RET mordy_3  = MFMISS2 END
LAF ADD_PROJECTL INT_VAR clone = 1 STR_VAR path = ~DeitiesOfFaerun/Lib/Spheres/Import/MordenkainenForceMissiles~	file = ~MFMISS2~ missile = ~Force Missile 2~ RET mordy_4  = MFMISS2 END
LAF ADD_PROJECTL INT_VAR clone = 1 STR_VAR path = ~DeitiesOfFaerun/Lib/Spheres/Import/MordenkainenForceMissiles~	file = ~MFMISS2~ missile = ~Force Missile 2~ RET mordy_5  = MFMISS2 END
LAF ADD_PROJECTL INT_VAR clone = 1 STR_VAR path = ~DeitiesOfFaerun/Lib/Spheres/Import/MordenkainenForceMissiles~	file = ~MFMISS2~ missile = ~Force Missile 2~ RET mordy_6  = MFMISS2 END
LAF ADD_PROJECTL INT_VAR clone = 1 STR_VAR path = ~DeitiesOfFaerun/Lib/Spheres/Import/MordenkainenForceMissiles~	file = ~MFMISS2~ missile = ~Force Missile 2~ RET mordy_7  = MFMISS2 END

ADD_SPELL ~DeitiesOfFaerun/Lib/Spheres/Import/MordenkainenForceMissiles/SPWI430.spl~ 2 4 WIZARD_MORDENKAINENS_FORCE_MISSILES
SAY NAME1 @9999124 SAY NAME2 @9999124 SAY UNIDENTIFIED_DESC @9999125 SAY DESC @9999125
TEXT_SPRINT	 spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~WIZARD_MORDENKAINENS_FORCE_MISSILES~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
FOR (i = 1;  i < 4; ++i)   BEGIN LPF ALTER_SPELL_HEADER INT_VAR header = i projectile = MFMISS   END END
FOR (i = 4;  i < 7; ++i)   BEGIN LPF ALTER_SPELL_HEADER INT_VAR header = i projectile = mordy_2  END END
FOR (i = 7;  i < 10; ++i)  BEGIN LPF ALTER_SPELL_HEADER INT_VAR header = i projectile = mordy_3  END END
FOR (i = 10; i < 13; ++i)  BEGIN LPF ALTER_SPELL_HEADER INT_VAR header = i projectile = mordy_4  END END
FOR (i = 13; i < 16; ++i)  BEGIN LPF ALTER_SPELL_HEADER INT_VAR header = i projectile = mordy_5  END END
FOR (i = 16; i < 19; ++i)  BEGIN LPF ALTER_SPELL_HEADER INT_VAR header = i projectile = mordy_6  END END
FOR (i = 19; i < 24; ++i)  BEGIN LPF ALTER_SPELL_HEADER INT_VAR header = i projectile = mordy_7  END END
LPF	ALTER_EFFECT      STR_VAR silent = 1   match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	 END
LPF	ALTER_EFFECT      STR_VAR silent = 1   match_resource = EVAL ~%SOURCE_RES%B~  resource = EVAL ~%spell_res%B~ END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/MordenkainenForceMissiles/SPWI430B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/MordenkainenForceMissiles/SPWI430C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/MordenkainenForceMissiles/SPWI430B.spl~    ~override\%spell_res%B.spl~
LPF ALTER_SPELL_HEADER INT_VAR projectile = %SMLLAREA% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1         match_resource = EVAL ~SPWI430~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~    resource = EVAL ~%spell_res%B~	END

COPY_EXISTING	~SPWI114.spl~	override
LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 parameter1 = EVAL "%RA_SpellInef%" target = 1 power = 1 resist_dispel = 3 duration = 300 STR_VAR resource = EVAL ~%spell_res%~  END
LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 parameter1 = EVAL "%RA_SpellInef%" target = 1 power = 1 resist_dispel = 3 duration = 300 STR_VAR resource = EVAL ~%spell_res%B~ END


END

//Lance of Disruption

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_LANCE_OF_DISRUPTION[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/LanceofDisruption/IDPRO313.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/LanceofDisruption/SPWI328.spl~ 2 4 WIZARD_LANCE_OF_DISRUPTION
SAY NAME1 @9999126 SAY NAME2 @9999126 SAY UNIDENTIFIED_DESC @9999127 SAY DESC @9999127
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~WIZARD_LANCE_OF_DISRUPTION~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO313%      END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/LanceofDisruption/SPWI328B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/LanceofDisruption/SPWI328C.BAM~	~override\%spell_res%C.BAM~

END

//Beast Claw

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_BEAST_CLAW[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesOfFaerun/Lib/Spheres/Import/BeastClaw/SPPR219.spl~ 1 2 CLERIC_BEAST_CLAW
SAY NAME1 @9999128 SAY NAME2 @9999128 SAY UNIDENTIFIED_DESC @9999129 SAY DESC @9999129
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT       STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/BeastClaw/SPPR219B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/BeastClaw/SPPR219C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/BeastClaw/BCLAW.ITM~	override
SAY NAME1 @9999128 SAY NAME2 @9999128 SAY UNIDENTIFIED_DESC @9999128 SAY DESC @9999128

END

//Animal Rage

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_ANIMAL_RAGE[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999130) STR_VAR bam_file = RARAGEIC RET iconrage = icon END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/AnimalRage/SPPR522.spl~ 1 5 CLERIC_ANIMAL_RAGE
SAY NAME1 @9999130 SAY NAME2 @9999130 SAY UNIDENTIFIED_DESC @9999131 SAY DESC @9999131
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%B~  resource = EVAL ~%spell_res%B~	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 173   parameter2 = iconrage END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/AnimalRage/SPPR522B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/AnimalRage/SPPR522C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/AnimalRage/SPPR522B.spl~	~override\%spell_res%B.spl~
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 37605 parameter1 = EVAL "%RA_Berserk%" END
LPF	ALTER_EFFECT	   STR_VAR silent = 1         match_resource = EVAL ~SPPR522~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~    resource = EVAL ~%spell_res%B~	END

END

//Alicorn Lance

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_ALICORN_LANCE[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/AlicornLance/IDPRO298.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/AlicornLance/SPPR218.spl~ 1 2 CLERIC_ALICORN_LANCE
SAY NAME1 @9999132 SAY NAME2 @9999132 SAY UNIDENTIFIED_DESC @9999133 SAY DESC @9999133
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_ALICORN_LANCE~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO298%      END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 21646 parameter1 = RESOLVE_STR_REF(@9999134) END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/AlicornLance/SPPR218B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/AlicornLance/SPPR218C.BAM~	~override\%spell_res%C.BAM~

END

//Produce Fire

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_PRODUCE_FIRE[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/ProduceFire/IDPRO215.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/ProduceFire/SPPR419.spl~ 1 4 CLERIC_PRODUCE_FIRE
SAY NAME1 @9999135 SAY NAME2 @9999135 SAY UNIDENTIFIED_DESC @9999136 SAY DESC @9999136
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_PRODUCE_FIRE~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO215%      END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ProduceFire/SPPR419B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/ProduceFire/SPPR419C.BAM~	~override\%spell_res%C.BAM~

END

//Shroud of Flames

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_SHROUD_OF_FLAME[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/ShroudofFlames/IDSHROUD.PRO~

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999137) STR_VAR bam_file = RAFLAMIC RET iconflam = icon END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/ShroudofFlames/SPWI524.spl~ 2 5 WIZARD_SHROUD_OF_FLAME
SAY NAME1 @9999137 SAY NAME2 @9999137 SAY UNIDENTIFIED_DESC @9999138 SAY DESC @9999138
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~WIZARD_SHROUD_OF_FLAME~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 94   parameter2 = iconflam END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShroudofFlames/SPWI524B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShroudofFlames/SPWI524C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShroudofFlames/SPWI524B.spl~	~override\%spell_res%B.spl~
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDSHROUD% END
LPF	ALTER_EFFECT	   STR_VAR match_resource = EVAL ~%SOURCE_RES%~   resource = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1         match_resource = EVAL ~SPWI524~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~    resource = EVAL ~%spell_res%B~	END

END

//Smashing Wave

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_SMASHING_WAVE[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SmashingWave/SWAVE.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SmashingWave/SPPR426.spl~ 1 4 CLERIC_SMASHING_WAVE
SAY NAME1 @9999139 SAY NAME2 @9999139 SAY UNIDENTIFIED_DESC @9999140 SAY DESC @9999140
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_SMASHING_WAVE~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %SWAVE% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	 END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 35568 parameter1 = EVAL "%RA_Stunned%"      END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 37340 parameter1 = EVAL "%RA_Unconscious%"  END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SmashingWave/SPPR426B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SmashingWave/SPPR426C.BAM~	~override\%spell_res%C.BAM~

END

//Snowball Swarm

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_SNILLOCS_SNOWBALL_SWARM[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SnillocSnowballSwarm/IDPRO217.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SnillocSnowballSwarm/SPWI204.spl~ 2 2 WIZARD_SNILLOCS_SNOWBALL_SWARM
SAY NAME1 @9999144 SAY NAME2 @9999144 SAY UNIDENTIFIED_DESC @9999145 SAY DESC @9999145
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO217% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%B~	  resource = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%C~	  resource = EVAL ~%spell_res%C~	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SnillocSnowballSwarm/SPWI204B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SnillocSnowballSwarm/SPWI204C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SnillocSnowballSwarm/SPWI204B.spl~	~override\%spell_res%B.spl~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SnillocSnowballSwarm/SPWI204C.spl~	~override\%spell_res%B.spl~

END

//Icelance

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_ICELANCE[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Icelance/IDPRO251.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Icelance/SPWI327.spl~ 2 3 WIZARD_ICELANCE
SAY NAME1 @9999146 SAY NAME2 @9999146 SAY UNIDENTIFIED_DESC @9999147 SAY DESC @9999147
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~WIZARD_ICELANCE~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO251% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	 END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~SPPR321~	      resource = EVAL ~%spell_res%~	 END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 35568 parameter1 = EVAL "%RA_Stunned%"      END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Icelance/SPWI327B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Icelance/SPWI327C.BAM~	~override\%spell_res%C.BAM~

END

//Cloudburst

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_CLOUDBURST[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Cloudburst/IDPRO301.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Cloudburst/SPPR325.spl~ 1 3 CLERIC_CLOUDBURST
SAY NAME1 @9999148 SAY NAME2 @9999148 SAY UNIDENTIFIED_DESC @9999149 SAY DESC @9999149
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO301% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END


COPY ~DeitiesofFaerun/Lib/Spheres/Import/Cloudburst/SPPR325B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Cloudburst/SPPR325C.BAM~	~override\%spell_res%C.BAM~

END

//Storm Shell

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_STORM_SHELL[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/StormShell/SPPR327.spl~ 1 3 CLERIC_STORM_SHELL
SAY NAME1 @9999150 SAY NAME2 @9999150 SAY UNIDENTIFIED_DESC @9999151 SAY DESC @9999151
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/StormShell/SPPR327B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/StormShell/SPPR327C.BAM~	~override\%spell_res%C.BAM~

END

//Freezing Sphere

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_OTILUKES_FREEZING_SPHERE[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/OtilukeFreezingSphere/IDPRO269.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/OtilukeFreezingSphere/SPWI628.spl~ 2 6 WIZARD_OTILUKES_FREEZING_SPHERE
SAY NAME1 @9999152 SAY NAME2 @9999152 SAY UNIDENTIFIED_DESC @9999153 SAY DESC @9999153
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO269% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/OtilukeFreezingSphere/SPWI628B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/OtilukeFreezingSphere/SPWI628C.BAM~	~override\%spell_res%C.BAM~

END

//Miracle Mists

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_MIST_OF_ELDATH[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/MistsofEldath/IDPRO307.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/MistsofEldath/SPPR736.spl~ 1 7 CLERIC_MIST_OF_ELDATH
SAY NAME1 @9999154 SAY NAME2 @9999154 SAY UNIDENTIFIED_DESC @9999155 SAY DESC @9999155
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_MIST_OF_ELDATH~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO307% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	 END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/MistsofEldath/SPPR736B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/MistsofEldath/SPPR736C.BAM~	~override\%spell_res%C.BAM~

END

//Static Charge

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_STATIC_CHARGE[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/StaticCharge/IDSTATIC.PRO~

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999156) STR_VAR bam_file = RASTATIC RET iconstat = icon END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/StaticCharge/SPPR420.spl~ 1 4 CLERIC_STATIC_CHARGE
SAY NAME1 @9999156 SAY NAME2 @9999156 SAY UNIDENTIFIED_DESC @9999157 SAY DESC @9999157
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_STATIC_CHARGE~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	 END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 42   parameter2 = iconstat END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/StaticCharge/SPPR420B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/StaticCharge/SPPR420C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/StaticCharge/SPPR420B.spl~	~override\%spell_res%B.spl~
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDSTATIC% END
LPF	ALTER_EFFECT	   STR_VAR match_resource = EVAL ~%SOURCE_RES%~   resource = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1         match_resource = EVAL ~SPPR420~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1         match_resource = EVAL ~%SOURCE_RES%~    resource = EVAL ~%spell_res%B~	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 40255 parameter1 = RESOLVE_STR_REF (@9999158) END

END

//Whirlwind

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_WHIRLWIND[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Whirlwind/WHIRLW.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Whirlwind/SPPR617.spl~ 1 6 CLERIC_WHIRLWIND
SAY NAME1 @9999159 SAY NAME2 @9999159 SAY UNIDENTIFIED_DESC @9999160 SAY DESC @9999160
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_WHIRLWIND~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %WHIRLW% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	 END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 35568 parameter1 = EVAL "%RA_Stunned%"      END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Whirlwind/SPPR617B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Whirlwind/SPPR617C.BAM~	~override\%spell_res%C.BAM~

END

//Spike Growth

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_SPIKE_GROWTH[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SpikeGrowth/IDPRO300.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SpikeGrowth/SPPR324.spl~ 1 3 CLERIC_SPIKE_GROWTH
SAY NAME1 @9999161 SAY NAME2 @9999161 SAY UNIDENTIFIED_DESC @9999162 SAY DESC @9999162
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_SPIKE_GROWTH~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO300% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	 END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SpikeGrowth/SPPR324B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SpikeGrowth/SPPR324C.BAM~	~override\%spell_res%C.BAM~

END

//Thorn Spray

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_THORN_SPRAY[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/ThornSpray/IDPRO303.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/ThornSpray/SPPR427.spl~ 1 4 CLERIC_THORN_SPRAY
SAY NAME1 @9999163 SAY NAME2 @9999163 SAY UNIDENTIFIED_DESC @9999164 SAY DESC @9999164
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_THORN_SPRAY~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO303% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	 END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ThornSpray/SPPR427B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/ThornSpray/SPPR427C.BAM~	~override\%spell_res%C.BAM~

END

//Stalker

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_STALKER[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Stalker/SPPR737.spl~ 1 7 CLERIC_STALKER
SAY NAME1 @9999165 SAY NAME2 @9999165 SAY UNIDENTIFIED_DESC @9999166 SAY DESC @9999166
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	resource = EVAL ~%spell_res%~ END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Stalker/SPPR737B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Stalker/SPPR737C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Stalker/SSHAMB.CRE~	override
SAY NAME1 @9999167 SAY NAME2 @9999167

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Stalker/SHMBLR.ITM~	override
LPF ALTER_EFFECT INT_VAR match_opcode = 139 match_parameter1 = 37709 parameter1 = EVAL "%RA_Entangled%" END

END

//Wither

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_WITHER[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Wither/SPPR740.spl~ 1 7 CLERIC_WITHER
SAY NAME1 @9999168 SAY NAME2 @9999168 SAY UNIDENTIFIED_DESC @9999169 SAY DESC @9999169
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	resource = EVAL ~%spell_res%~ END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 40835 parameter1 = RESOLVE_STR_REF (@9999170) END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Wither/SPPR740B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Wither/SPPR740C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Wither/SPPR740.EFF~	~override\%spell_res%.EFF~

END

//Spike Stones

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_SPIKE_STONES[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SpikeStones/IDPRO213.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SpikeStones/SPPR519.spl~ 1 5 CLERIC_SPIKE_STONES
SAY NAME1 @9999171 SAY NAME2 @9999171 SAY UNIDENTIFIED_DESC @9999172 SAY DESC @9999172
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_SPIKE_STONES~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO213% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	resource = EVAL ~%spell_res%~ END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SpikeStones/SPPR519B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SpikeStones/SPPR519C.BAM~	~override\%spell_res%C.BAM~

END

//Iron Body

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_IRON_BODY[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999173) STR_VAR bam_file = RAIRONIC RET iconiron = icon END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/IronBody/SPWI814.spl~ 2 8 WIZARD_IRON_BODY
SAY NAME1 @9999173 SAY NAME2 @9999173 SAY UNIDENTIFIED_DESC @9999174 SAY DESC @9999174
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	resource = EVAL ~%spell_res%~ END
LPF ADD_SPELL_EFFECT   INT_VAR opcode = 206 target = 1 power = 8 resist_dispel = 3 duration = 120 STR_VAR resource = ~RAUMBE3~ END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35593 parameter1 = EVAL "%RA_Diseased%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 39752 parameter1 = EVAL "%RA_FoulDisease%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 36317 parameter1 = EVAL "%RA_Poison%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37607 parameter1 = EVAL "%RA_Poisoned%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 172   parameter2 = iconiron END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 206 END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/IronBody/SPWI814B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/IronBody/SPWI814C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/IronBody/IBODY.ITM~	override
SAY NAME1 @9999175 SAY NAME2 @9999175 SAY UNIDENTIFIED_DESC @9999175 SAY DESC @9999175

END

ACTION_IF ((!GAME_IS ~iwdee~) AND (FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]WIZARD_IRON_BODY[ %TAB%%WNL%%LNL%%MNL%$]~)))	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_IRON_BODY~	RET	spell_res	END

COPY_EXISTING	~%spell_res%.spl~	override
PATCH_FOR_EACH label IN
	~WIZARD_MALAVONS_CORROSIVE_FOG~
	~WIZARD_ABI_DALZIMS_HORRID_WILTING~
	~WIZARD_SUFFOCATE~
	~WIZARD_STINKING_CLOUD~
	~WIZARD_DEATH_FOG~
	~WIZARD_CLOUDKILL~
	~WIZARD_BELTYNS_BURNING_BLOOD~
	~WIZARD_FLESH_TO_STONE~
	~WIZARD_CONTAGION~
	~WIZARD_INCENDIARY_CLOUD~
	~CLERIC_MIST_OF_ELDATH~
	~CLERIC_UNFAILING_ENDURANCE~
	~CLERIC_CLOUD_OF_PESTILENCE~
	~CLERIC_MOLD_TOUCH~
	~CLERIC_POISON~
	~CLERIC_WRITHING_FOG~
	~CLERIC_DOLOROUS_DECAY~
	~CLERIC_WITHER~
	~TRAP_STINKING_CLOUD~
	~TRAP_CLOUDKILL~
	~TRAP_FLESH_TO_STONE~
	~TRAP_DEATH_FOG~
	~INNATE_BEHOLDER_FLESH_TO_STONE~
	~INNATE_MUSTARD_JELLY_VAPOR~
	~INNATE_INCENDIARY_CLOUD_IDLING~
	~INNATE_INCENDIARY_CLOUD_EXPLOSION~
	~INNATE_MYCONID_SPORES~
	~INNATE_IRON_GOLEM_CLOUD~
	~GOLEM_GASCLOUD~
BEGIN
	PATCH_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~ ~[ %TAB%]%label%[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
		LPF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = EVAL ~%label%~	RET	spell_res	END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 power = 8 resist_dispel = 3 duration = 120 STR_VAR resource = EVAL ~%spell_res%~ END
	END
END

END

//Blood Rage

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_BLOOD_RAGE[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999176) STR_VAR bam_file = RABLOOIC RET iconbloo = icon END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/BloodRage/SPPR422.spl~ 1 4 CLERIC_BLOOD_RAGE
SAY NAME1 @9999176 SAY NAME2 @9999176 SAY UNIDENTIFIED_DESC @9999177 SAY DESC @9999177
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_BLOOD_RAGE~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 176   parameter2 = iconbloo                END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35473 parameter1 = EVAL "%RA_Healed%" 		END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35544 parameter1 = EVAL "%RA_Dominated%"   END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 17392 parameter1 = EVAL "%RA_DireCharmed%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37801 parameter1 = EVAL "%RA_Charmed%"     END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 20568 parameter1 = EVAL "%RA_MoralFail%"   END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35484 parameter1 = EVAL "%RA_Panic%"       END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37613 parameter1 = EVAL "%RA_Sleep%"       END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37340 parameter1 = EVAL "%RA_Unconscious%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 1280  parameter1 = EVAL "%RA_Stunned%" 	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37603 parameter1 = EVAL "%RA_RigidThink%"  END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37604 parameter1 = EVAL "%RA_Confused%"    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35542 parameter1 = EVAL "%RA_Paralyzed%" 	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35606 parameter1 = EVAL "%RA_Held%"  		END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 match_resource = ~SPPR714~ END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 match_resource = ~SPPR716~ END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 match_resource = ~SPWI427~ END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 match_resource = ~SPWI428~ END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 match_resource = ~SPWI429~ END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/BloodRage/SPPR422B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/BloodRage/SPPR422C.BAM~	~override\%spell_res%C.BAM~

END

ACTION_IF ((!GAME_IS ~iwdee~) AND (FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_BLOOD_RAGE[ %TAB%%WNL%%LNL%%MNL%$]~)))	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_BLOOD_RAGE~	RET	spell_res	END

COPY_EXISTING	~%spell_res%.spl~	override
PATCH_FOR_EACH label IN
	~CLERIC_SYMBOL_OF_PAIN~
	~CLERIC_SYMBOL_OF_HOPELESSNESS~
	~CLERIC_SYMBOL_FEAR~
	~CLERIC_SYMBOL_DEATH~
	~CLERIC_SYMBOL_STUN~
	~WIZARD_SYMBOL_FEAR~
	~WIZARD_SYMBOL_DEATH~
	~WIZARD_SYMBOL_STUN~
	~WIZARD_EMOTION_COURAGE~
	~WIZARD_EMOTION_FEAR~
	~WIZARD_EMOTION_HOPE~
	~WIZARD_NPC_SYMBOL_FEAR~
	~WIZARD_NPC_SYMBOL_STUN~
	~WIZARD_NPC_SYMBOL_DEATH~
BEGIN
	PATCH_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~ ~[ %TAB%]%label%[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
		LPF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = EVAL ~%label%~	RET	spell_res	END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 318 target = 2 power = 4 parameter1 = 2 resist_dispel = 3 duration = 120 STR_VAR resource = EVAL ~%spell_res%~ END
	END
END

END

//Exaltation

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_EXALTATION[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999178) STR_VAR bam_file = RAEXALIC RET iconexal = icon END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Exaltation/SPPR321.spl~ 1 3 CLERIC_EXALTATION
SAY NAME1 @9999178 SAY NAME2 @9999178 SAY UNIDENTIFIED_DESC @9999179 SAY DESC @9999179
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 174   parameter2 = iconexal                END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 20568 parameter1 = EVAL "%RA_MoralFail%"   END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35484 parameter1 = EVAL "%RA_Panic%"       END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37613 parameter1 = EVAL "%RA_Sleep%"       END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37340 parameter1 = EVAL "%RA_Unconscious%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37606 parameter1 = EVAL "%RA_Intoxicated%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37605 parameter1 = EVAL "%RA_Berserk%"     END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37603 parameter1 = EVAL "%RA_RigidThink%"  END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37604 parameter1 = EVAL "%RA_Confused%"    END
LPF	ALTER_EFFECT	   INT_VAR match_opcode = 321 STR_VAR match_resource = ~SPPR422~ resource = EVAL $res_of_label(~CLERIC_BLOOD_RAGE~)	END
LPF	ALTER_EFFECT	   INT_VAR match_opcode = 206 STR_VAR match_resource = ~SPPR422~ resource = EVAL $res_of_label(~CLERIC_BLOOD_RAGE~)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Exaltation/SPPR321B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Exaltation/SPPR321C.BAM~	~override\%spell_res%C.BAM~

END

//Impervious Sanctity of Mind

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_IMPERVIOUS_SANCTITY_OF_MIND[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999180) STR_VAR bam_file = RAMINDIC RET iconmind = icon END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/ImperviousSancityofMind/SPPR733.spl~ 1 7 CLERIC_IMPERVIOUS_SANCTITY_OF_MIND
SAY NAME1 @9999180 SAY NAME2 @9999180 SAY UNIDENTIFIED_DESC @9999181 SAY DESC @9999181
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 170   parameter2 = iconmind                END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 20568 parameter1 = EVAL "%RA_MoralFail%"   END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35484 parameter1 = EVAL "%RA_Panic%"       END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37613 parameter1 = EVAL "%RA_Sleep%"       END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37340 parameter1 = EVAL "%RA_Unconscious%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37606 parameter1 = EVAL "%RA_Intoxicated%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37605 parameter1 = EVAL "%RA_Berserk%"     END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35544 parameter1 = EVAL "%RA_Dominated%"   END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 17392 parameter1 = EVAL "%RA_DireCharmed%" END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37801 parameter1 = EVAL "%RA_Charmed%"     END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37603 parameter1 = EVAL "%RA_RigidThink%"  END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37604 parameter1 = EVAL "%RA_Confused%"    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35542 parameter1 = EVAL "%RA_Paralyzed%" 	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35606 parameter1 = EVAL "%RA_Held%"  		END
LPF	CLONE_EFFECT	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR102~ resource = ~RACLAN1~	    END
LPF	CLONE_EFFECT	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR102~ resource = ~RATORM1~	    END
LPF	CLONE_EFFECT	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR405~ resource = ~RABANE2~	    END
LPF	ALTER_EFFECT	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR716~ resource = EVAL $res_of_label(~CLERIC_SYMBOL_OF_HOPELESSNESS~)	END
LPF	ALTER_EFFECT	   INT_VAR match_opcode = 206 STR_VAR match_resource = ~SPPR422~ resource = EVAL $res_of_label(~CLERIC_BLOOD_RAGE~)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ImperviousSancityofMind/SPPR733B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/ImperviousSancityofMind/SPPR733C.BAM~	~override\%spell_res%C.BAM~

END

//Shout

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_SHOUT[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/Shout/IDPRO315.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Shout/SPWI431.spl~ 2 4 WIZARD_SHOUT
SAY NAME1 @9999182 SAY NAME2 @9999182 SAY UNIDENTIFIED_DESC @9999183 SAY DESC @9999183
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	$res_of_label(~WIZARD_SHOUT~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO315%      END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shout/SPWI431B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Shout/SPWI431C.BAM~	~override\%spell_res%C.BAM~

END

//Power Word, Blind

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_POWER_WORD_BLIND[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/PowerWordBlind/IDPRO336.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/PowerWordBlind/SPWI815.spl~ 2 8 WIZARD_POWER_WORD_BLIND
SAY NAME1 @9999184 SAY NAME2 @9999184 SAY UNIDENTIFIED_DESC @9999185 SAY DESC @9999185
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO336%      END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 37800 parameter1 = EVAL "%RA_Blinded%"  		END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/PowerWordBlind/SPWI815B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/PowerWordBlind/SPWI815C.BAM~	~override\%spell_res%C.BAM~

END

//Great Shout

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_GREAT_SHOUT[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/GreatShout/IDPRO319.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/GreatShout/SPWI806.spl~ 2 8 WIZARD_GREAT_SHOUT
SAY NAME1 @9999186 SAY NAME2 @9999186 SAY UNIDENTIFIED_DESC @9999187 SAY DESC @9999187
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO319%      END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 37340 parameter1 = EVAL "%RA_Unconscious%"  	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 35568 parameter1 = EVAL "%RA_Stunned%"  		END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/GreatShout/SPWI806B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/GreatShout/SPWI806C.BAM~	~override\%spell_res%C.BAM~

END

//Righteous Wrath of the Faithful

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_RIGHTEOUS_WRATH_OF_THE_FAITHFUL[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/RighteousWrathoftheFaithful/IDPRO266.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/RighteousWrathoftheFaithful/SPPR518.spl~ 1 5 CLERIC_RIGHTEOUS_WRATH_OF_THE_FAITHFUL
SAY NAME1 @9999188 SAY NAME2 @9999188 SAY UNIDENTIFIED_DESC @9999189 SAY DESC @9999189
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO266%      END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%A~	  resource = EVAL ~%spell_res%A~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%B~	  resource = EVAL ~%spell_res%B~	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/RighteousWrathoftheFaithful/SPPR518B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/RighteousWrathoftheFaithful/SPPR518C.BAM~	~override\%spell_res%C.BAM~

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999188) STR_VAR bam_file = RAALLIC RET iconwrat = icon  END
COPY ~DeitiesofFaerun/Lib/Spheres/Import/RighteousWrathoftheFaithful/SPPR518A.spl~	~override\%spell_res%A.spl~
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~SPPR518~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~   resource = EVAL ~%spell_res%A~	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 184   parameter2 = iconwrat END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 36035 parameter1 = EVAL "%RA_Hasted%"  		END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35544 parameter1 = EVAL "%RA_Dominated%"   	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 17392 parameter1 = EVAL "%RA_DireCharmed%" 	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 37801 parameter1 = EVAL "%RA_Charmed%"     	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35606 parameter1 = EVAL "%RA_Held%"  			END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 267 match_parameter1 = 35542 parameter1 = EVAL "%RA_Paralyzed%" 		END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/RighteousWrathoftheFaithful/SPPR518B.spl~	~override\%spell_res%B.spl~
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~SPPR518~	      resource = EVAL ~%spell_res%~	    END
LPF	ALTER_EFFECT	   STR_VAR silent = 1  match_resource = EVAL ~%SOURCE_RES%~   resource = EVAL ~%spell_res%B~	END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 184   parameter2 = iconwrat END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%B~	  resource = EVAL ~%spell_res%B~	END

END

//Antimagic Shell

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_ANTIMAGIC_SHELL[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999190) STR_VAR bam_file = RASHELIC RET iconshel = icon  END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/AntimagicShell/SPWI610.spl~ 2 6 WIZARD_ANTIMAGIC_SHELL
SAY NAME1 @9999190 SAY NAME2 @9999190 SAY UNIDENTIFIED_DESC @9999191 SAY DESC @9999191
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	     END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 139 match_parameter1 = 35499 parameter1 = EVAL "%RA_Dispel%"  	     END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 93    parameter2 = iconshel                     END
LPF	ALTER_EFFECT 	   INT_VAR match_opcode = 145 match_parameter2 = 2     parameter2 = 3 						     END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 206                                                                    END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 102 match_parameter1 = 1 opcode = 181 parameter1 = 0  parameter2 = 1   END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 102 match_parameter1 = 1 opcode = 181 parameter1 = 9  parameter2 = 1   END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 102 match_parameter1 = 1 opcode = 181 parameter1 = 11 parameter2 = 1   END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 102 match_parameter1 = 1 opcode = 181 parameter1 = 35 parameter2 = 1   END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~MELFMET~   		     END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~ENEBLADE~  			 END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~FBLADE~    			 END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~GHOULT~    			 END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~CHILLT~    			 END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~PHANBLAD~  			 END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~BLAKBLAD~  			 END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 opcode = 321 STR_VAR match_resource = ~BCLAW~ resource = ~SPWI417~ END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 123 STR_VAR match_resource = ~FSEEDS~ resource = ~STARDART~  			 END
	
COPY ~DeitiesofFaerun/Lib/Spheres/Import/AntimagicShell/SPWI610B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/AntimagicShell/SPWI610C.BAM~	~override\%spell_res%C.BAM~

END

//Destruction

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_DESTRUCTION[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/Destruction/SPPR734.spl~ 1 7 CLERIC_DESTRUCTION
SAY NAME1 @9999192 SAY NAME2 @9999192 SAY UNIDENTIFIED_DESC @9999193 SAY DESC @9999193
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	 $res_of_label(~CLERIC_DESTRUCTION~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/Destruction/SPPR734B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/Destruction/SPPR734C.BAM~	~override\%spell_res%C.BAM~

END

//Self-Sacrifice

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_FAVOR_OF_ILMATER[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/FavorofIlmater/SPARKLPU.PRO~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/FavorofIlmater/SPPR331.spl~ 1 3 CLERIC_FAVOR_OF_ILMATER
SAY NAME1 @9999194 SAY NAME2 @9999194 SAY UNIDENTIFIED_DESC @9999195 SAY DESC @9999195
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %SPARKLPU%      END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/FavorofIlmater/SPPR331B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/FavorofIlmater/SPPR331C.BAM~	~override\%spell_res%C.BAM~

END

//Shield of Divine

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_SHIELD_OF_LATHANDER[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999194) STR_VAR bam_file = RADIVIIC RET icondivi = icon  END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/ShieldofLathander/SPPR520.spl~ 1 5 CLERIC_SHIELD_OF_LATHANDER
SAY NAME1 @9999196 SAY NAME2 @9999196 SAY UNIDENTIFIED_DESC @9999197 SAY DESC @9999197
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	  END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 164   parameter2 = icondivi                  END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 324                                                                 END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShieldofLathander/SPPR520B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/ShieldofLathander/SPPR520C.BAM~	~override\%spell_res%C.BAM~

END

//Greater Shield of Divine

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_GREATER_SHIELD_OF_LATHANDER[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999196) STR_VAR bam_file = RADIV2IC RET icondiv2 = icon  END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/GreaterShieldofLathander/SPPR735.spl~ 1 7 CLERIC_GREATER_SHIELD_OF_LATHANDER
SAY NAME1 @9999198 SAY NAME2 @9999198 SAY UNIDENTIFIED_DESC @9999199 SAY DESC @9999199
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	  END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 165   parameter2 = icondiv2                  END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 324                                                                 END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/GreaterShieldofLathander/SPPR735B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/GreaterShieldofLathander/SPPR735C.BAM~	~override\%spell_res%C.BAM~

END

//Entropy Shield

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_ENTROPY_SHIELD[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_portrait_icon INT_VAR string = RESOLVE_STR_REF(@9999198) STR_VAR bam_file = RAENTRIC RET iconentr = icon  END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/EntropyShield/SPPR615.spl~ 1 6 CLERIC_ENTROPY_SHIELD
SAY NAME1 @9999200 SAY NAME2 @9999200 SAY UNIDENTIFIED_DESC @9999201 SAY DESC @9999201
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	 								 END
LPF ALTER_EFFECT 	   INT_VAR match_opcode = 142 match_parameter2 = 56   parameter2 = iconentr                  								 END
LPF	ALTER_EFFECT 	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPWI327~ resource = EVAL $res_of_label(~WIZARD_ICELANCE~)			 		  END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = ~RASUNE3~		 								 		  END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = ~RAAURI1~		 								 		  END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = ~SPPR503~		 								 		  END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = EVAL $res_of_label(~WIZARD_LANCE_OF_DISRUPTION~) 		  END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = EVAL $res_of_label(~CLERIC_ALICORN_LANCE~) 		 		  END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = EVAL $res_of_label(~CLERIC_SUNSCORCH~) 		 	 		  END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = EVAL $res_of_label(~WIZARD_MORDENKAINENS_FORCE_MISSILES~) END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/EntropyShield/SPPR615B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/EntropyShield/SPPR615C.BAM~	~override\%spell_res%C.BAM~

END

//Seven Eyes

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_SEVEN_EYES[ %TAB%%WNL%$]~) BEGIN

ACTION_IF !FILE_EXISTS_IN_GAME ~7EYES.2da~	BEGIN

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/7EYES.2da~	override

OUTER_SET index = 0

END ELSE BEGIN

COPY_EXISTING ~7EYES.2da~ override COUNT_2DA_ROWS 1 index index -= 3 BUT_ONLY

END

//Eye of Mind

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN107.spl~ 3 1 SEVEN_EYES_MIND
SAY NAME1 @9999204 SAY NAME2 @9999204 SAY UNIDENTIFIED_DESC @9999205 SAY DESC @9999205
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	$res_of_label(~SEVEN_EYES_MIND~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~ END
LPF	ALTER_EFFECT 	   INT_VAR match_opcode = 337 parameter1 = (index + 0)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN107B.BAM~	~override\%spell_res%B.BAM~

//Eye of Sword

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN108.spl~ 3 1 SEVEN_EYES_SWORD
SAY NAME1 @9999206 SAY NAME2 @9999206 SAY UNIDENTIFIED_DESC @9999207 SAY DESC @9999207
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	$res_of_label(~SEVEN_EYES_SWORD~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~ END
LPF	ALTER_EFFECT 	   STR_VAR match_resource = ~SPWI112~ resource = ~RAWI112~									END
LPF	ALTER_EFFECT 	   INT_VAR match_opcode = 337 parameter1 = (index + 1)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN108B.BAM~	~override\%spell_res%B.BAM~

//Eye of Mage

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN109.spl~ 3 1 SEVEN_EYES_MAGE
SAY NAME1 @9999208 SAY NAME2 @9999208 SAY UNIDENTIFIED_DESC @9999209 SAY DESC @9999209
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	$res_of_label(~SEVEN_EYES_MAGE~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~ END
LPF	ALTER_EFFECT 	   STR_VAR match_resource = ~SPWI308~ resource = ~SPDR301~									END
LPF	ALTER_EFFECT 	   INT_VAR match_opcode = 337 parameter1 = (index + 2)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN109B.BAM~	~override\%spell_res%B.BAM~

//Eye of Venom

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN110.spl~ 3 1 SEVEN_EYES_VENOM
SAY NAME1 @9999210 SAY NAME2 @9999210 SAY UNIDENTIFIED_DESC @9999211 SAY DESC @9999211
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	$res_of_label(~SEVEN_EYES_VENOM~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~ END
LPF	ALTER_EFFECT 	   INT_VAR match_opcode = 337 parameter1 = (index + 3)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN110B.BAM~	~override\%spell_res%B.BAM~

//Eye of Spirit

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN111.spl~ 3 1 SEVEN_EYES_SPIRIT
SAY NAME1 @9999212 SAY NAME2 @9999212 SAY UNIDENTIFIED_DESC @9999213 SAY DESC @9999213
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	$res_of_label(~SEVEN_EYES_SPIRIT~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~ END
LPF	ALTER_EFFECT 	   INT_VAR match_opcode = 337 parameter1 = (index + 4)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN111B.BAM~	~override\%spell_res%B.BAM~

//Eye of Fortitude

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN112.spl~ 3 1 SEVEN_EYES_FORTITUDE
SAY NAME1 @9999214 SAY NAME2 @9999214 SAY UNIDENTIFIED_DESC @9999215 SAY DESC @9999215
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	$res_of_label(~SEVEN_EYES_FORTITUDE~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~ END
LPF	ALTER_EFFECT 	   STR_VAR match_resource = ~SPWI431~ resource = EVAL $res_of_label(~WIZARD_SHOUT~)			END
LPF	ALTER_EFFECT 	   INT_VAR match_opcode = 337 parameter1 = (index + 5)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN112B.BAM~	~override\%spell_res%B.BAM~

//Eye of Stone

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN113.spl~ 3 1 SEVEN_EYES_SPIRIT
SAY NAME1 @9999216 SAY NAME2 @9999216 SAY UNIDENTIFIED_DESC @9999217 SAY DESC @9999217
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
TEXT_SPRINT	$res_of_label(~SEVEN_EYES_SPIRIT~) ~%spell_res%~
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~ END
LPF	ALTER_EFFECT 	   INT_VAR match_opcode = 337 parameter1 = (index + 6)	END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPIN113B.BAM~	~override\%spell_res%B.BAM~

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPWI725.spl~ 2 7 WIZARD_SEVEN_EYES
SAY NAME1 @9999202 SAY NAME2 @9999202 SAY UNIDENTIFIED_DESC @9999203 SAY DESC @9999203
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~ END
FOR	(i = 0; i < 7; ++i)	BEGIN
	LPF	ALTER_EFFECT INT_VAR match_opcode = 335 match_parameter1 = (48 + i) parameter2 = (index + i)  			END
END
LPF	ALTER_EFFECT STR_VAR silent = 1 match_parameter1 = 48 resource = EVAL $res_of_label(~SEVEN_EYES_MIND~) 		END
LPF	ALTER_EFFECT STR_VAR silent = 1 match_parameter1 = 49 resource = EVAL $res_of_label(~SEVEN_EYES_SWORD~) 	END
LPF	ALTER_EFFECT STR_VAR silent = 1 match_parameter1 = 50 resource = EVAL $res_of_label(~SEVEN_EYES_MAGE~) 		END
LPF	ALTER_EFFECT STR_VAR silent = 1 match_parameter1 = 51 resource = EVAL $res_of_label(~SEVEN_EYES_VENOM~) 	END
LPF	ALTER_EFFECT STR_VAR silent = 1 match_parameter1 = 52 resource = EVAL $res_of_label(~SEVEN_EYES_SPIRIT~) 	END
LPF	ALTER_EFFECT STR_VAR silent = 1 match_parameter1 = 53 resource = EVAL $res_of_label(~SEVEN_EYES_FORTITUDE~) END
LPF	ALTER_EFFECT STR_VAR silent = 1 match_parameter1 = 54 resource = EVAL $res_of_label(~SEVEN_EYES_STONE~) 	END
LPF	ALTER_EFFECT INT_VAR match_parameter1 = 36022 parameter1 = RESOLVE_STR_REF(@9999218) END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPWI725B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SevenEyes/SPWI725C.BAM~	~override\%spell_res%C.BAM~

OUTER_SET strref = RESOLVE_STR_REF(@9999204)
APPEND ~7EYES.2da~ ~EYEMIND 48 %strref% 3 5 24 76 128 SPWI411 SPPR102 SPPR311 %res_of_label_CLERIC_SYMBOL_OF_HOPELESSNESS%~

OUTER_SET strref = RESOLVE_STR_REF(@9999206)
APPEND ~7EYES.2da~ ~EYESWORD 49 %strref% 12*0 12*0x800000 12*0x100000 12*0x1000000 12*0x8000000 * * * *~

OUTER_SET strref = RESOLVE_STR_REF(@9999208)
APPEND ~7EYES.2da~ ~EYEMAGE 50 %strref% 12*0x80000 12*0x40000 12*0x20000 12*0x10000 12*0x400000 * * * *~

OUTER_SET strref = RESOLVE_STR_REF(@9999210)
APPEND ~7EYES.2da~ ~EYEVENOM 51 %strref% 12*0x200000 25 * * * * * * *~

OUTER_SET strref = RESOLVE_STR_REF(@9999212)
APPEND ~7EYES.2da~ ~EYESPIRIT 52 %strref% SPWI605 SPWI713 SPWI912 SPPR511 %res_of_label_CLERIC_DESTRUCTION% * * * *~

OUTER_SET strref = RESOLVE_STR_REF(@9999214)
APPEND ~7EYES.2da~ ~EYEFORTITUDE 53 %strref% 38 45 74 80 109 175 210 * *~

OUTER_SET strref = RESOLVE_STR_REF(@9999216)
APPEND ~7EYES.2da~ ~EYESTONE 54 %strref% 134 * * * * * * * *~

COPY_EXISTING ~7EYES.2da~ override
PRETTY_PRINT_2DA

END

//Spiritual Wrath

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_SPIRITUAL_WRATH[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SpiritualWrath/IDPRO207.PRO~

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/SpiritualWrath/IDPRO312.PRO~

COPY_EXISTING	~IDPRO312.PRO~	override
WRITE_SHORT 0x021a IDPRO207

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/SpiritualWrath/SPPR618.spl~ 1 6 CLERIC_SPIRITUAL_WRATH
SAY NAME1 @9999219 SAY NAME2 @9999219 SAY UNIDENTIFIED_DESC @9999220 SAY DESC @9999220
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO312% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/SpiritualWrath/SPPR616B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/SpiritualWrath/SPPR616C.BAM~	~override\%spell_res%C.BAM~

END

//Cause Medium Wounds

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_CAUSE_MEDIUM_WOUNDS[ %TAB%%WNL%$]~) BEGIN

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/CauseMediumWounds/SPPR330.spl~ 1 3 CLERIC_CAUSE_MEDIUM_WOUNDS
SAY NAME1 @9999221 SAY NAME2 @9999221 SAY UNIDENTIFIED_DESC @9999222 SAY DESC @9999222
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/CauseMediumWounds/SPPR330B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/CauseMediumWounds/SPPR330C.BAM~	~override\%spell_res%C.BAM~

END

//Mass Cause Light Wounds

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_MASS_CAUSE_LIGHT_WOUNDS[ %TAB%%WNL%$]~) BEGIN

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/MassCauseLightWounds/SPARRENP.PRO~

ADD_PROJECTILE ~DeitiesofFaerun/Lib/Spheres/Import/MassCauseLightWounds/SPARKLRE.PRO~

COPY_EXISTING	~SPARRENP.PRO~	override
WRITE_SHORT 0x0214 SPARKLRE

ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/MassCauseLightWounds/SPPR523.spl~ 1 5 CLERIC_MASS_CAUSE_LIGHT_WOUNDS
SAY NAME1 @9999223 SAY NAME2 @9999223 SAY UNIDENTIFIED_DESC @9999224 SAY DESC @9999224
TEXT_SPRINT	spell_res	~%DEST_RES%~	TO_UPPER	spell_res
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF ALTER_SPELL_HEADER INT_VAR projectile = %SPARRENP% END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/MassCauseLightWounds/SPPR523B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/MassCauseLightWounds/SPPR523C.BAM~	~override\%spell_res%C.BAM~

END

END

/*Spell Fixes and Improvements */

ACTION_IF ((GAME_IS ~iwdee~) OR (MOD_IS_INSTALLED ~spells/SetUp-spells.tp2~ ~0~) OR (MOD_IS_INSTALLED ~Iwdification/setup-iwdification.tp2~ ~0~)) BEGIN

//Mass Cause Wounds

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_MASS_CAUSE_LIGHT_WOUNDS[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_MASS_CAUSE_LIGHT_WOUNDS~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999223 SAY NAME2 @9999223 SAY UNIDENTIFIED_DESC @9999224 SAY DESC @9999224

END

//Cause Medium Wounds

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_CAUSE_MEDIUM_WOUNDS[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_CAUSE_MEDIUM_WOUNDS~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999221 SAY NAME2 @9999221 SAY UNIDENTIFIED_DESC @9999222 SAY DESC @9999222

END

//Cause Moderate Wounds

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_CAUSE_MODERATE_WOUNDS[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_CAUSE_MODERATE_WOUNDS~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @999981 SAY NAME2 @999981 SAY UNIDENTIFIED_DESC @999982 SAY DESC @999982

END

//Cause Light Wounds

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_CAUSE_LIGHT_WOUNDS[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_CAUSE_LIGHT_WOUNDS~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @999979 SAY NAME2 @999979 SAY UNIDENTIFIED_DESC @999980 SAY DESC @999980

END

//Circle of Bones

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_CIRCLE_OF_BONES[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_CIRCLE_OF_BONES~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @999954 SAY NAME2 @999954 SAY UNIDENTIFIED_DESC @999955 SAY DESC @999955

END

//Cause Disease

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_CAUSE_DISEASE[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_CAUSE_DISEASE~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @999983 SAY NAME2 @999983 SAY UNIDENTIFIED_DESC @999984 SAY DESC @999984

END

//Cloud of Pestilence

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_CLOUD_OF_PESTILENCE[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_CLOUD_OF_PESTILENCE~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @999987 SAY NAME2 @999987 SAY UNIDENTIFIED_DESC @999988 SAY DESC @999988

END

//Wither

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_WITHER[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_WITHER~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999168 SAY NAME2 @9999168 SAY UNIDENTIFIED_DESC @9999169 SAY DESC @9999169

END

//Iron Body

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]WIZARD_IRON_BODY[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_IRON_BODY~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999173 SAY NAME2 @9999173 SAY UNIDENTIFIED_DESC @9999174 SAY DESC @9999174
LPF ADD_SPELL_EFFECT   INT_VAR opcode = 206 target = 1 power = 8 resist_dispel = 3 duration = 120 STR_VAR resource = ~RAUMBE3~ END
PATCH_FOR_EACH label IN
	~WIZARD_MALAVONS_CORROSIVE_FOG~
	~WIZARD_ABI_DALZIMS_HORRID_WILTING~
	~WIZARD_SUFFOCATE~
	~WIZARD_STINKING_CLOUD~
	~WIZARD_DEATH_FOG~
	~WIZARD_CLOUDKILL~
	~WIZARD_BELTYNS_BURNING_BLOOD~
	~WIZARD_FLESH_TO_STONE~
	~WIZARD_CONTAGION~
	~WIZARD_INCENDIARY_CLOUD~
	~CLERIC_MIST_OF_ELDATH~
	~CLERIC_UNFAILING_ENDURANCE~
	~CLERIC_CLOUD_OF_PESTILENCE~
	~CLERIC_MOLD_TOUCH~
	~CLERIC_POISON~
	~CLERIC_WRITHING_FOG~
	~CLERIC_DOLOROUS_DECAY~
	~CLERIC_WITHER~
	~TRAP_STINKING_CLOUD~
	~TRAP_CLOUDKILL~
	~TRAP_FLESH_TO_STONE~
	~TRAP_DEATH_FOG~
	~INNATE_BEHOLDER_FLESH_TO_STONE~
	~INNATE_MUSTARD_JELLY_VAPOR~
	~INNATE_INCENDIARY_CLOUD_IDLING~
	~INNATE_INCENDIARY_CLOUD_EXPLOSION~
	~INNATE_MYCONID_SPORES~
	~INNATE_IRON_GOLEM_CLOUD~
	~GOLEM_GASCLOUD~
BEGIN
	PATCH_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~ ~[ %TAB%]%label%[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
		LPF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = EVAL ~%label%~	RET	spell_res	END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 power = 8 resist_dispel = 3 duration = 120 STR_VAR resource = EVAL ~%spell_res%~ END
	END
END

END

//Blood Rage

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_BLOOD_RAGE[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_BLOOD_RAGE~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999176 SAY NAME2 @9999176 SAY UNIDENTIFIED_DESC @9999177 SAY DESC @9999177
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 match_resource = ~SPPR714~ END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 match_resource = ~SPPR716~ END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 match_resource = ~SPWI427~ END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 match_resource = ~SPWI428~ END
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 318 match_resource = ~SPWI429~ END
PATCH_FOR_EACH label IN
	~CLERIC_SYMBOL_OF_PAIN~
	~CLERIC_SYMBOL_OF_HOPELESSNESS~
	~CLERIC_SYMBOL_FEAR~
	~CLERIC_SYMBOL_DEATH~
	~CLERIC_SYMBOL_STUN~
	~WIZARD_SYMBOL_FEAR~
	~WIZARD_SYMBOL_DEATH~
	~WIZARD_SYMBOL_STUN~
	~WIZARD_EMOTION_COURAGE~
	~WIZARD_EMOTION_FEAR~
	~WIZARD_EMOTION_HOPE~
	~WIZARD_NPC_SYMBOL_FEAR~
	~WIZARD_NPC_SYMBOL_STUN~
	~WIZARD_NPC_SYMBOL_DEATH~
BEGIN
	PATCH_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~ ~[ %TAB%]%label%[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
		LPF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = EVAL ~%label%~	RET	spell_res	END
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 318 target = 2 power = 4 parameter1 = 2 resist_dispel = 3 duration = 120 STR_VAR resource = EVAL ~%spell_res%~ END
	END
END

END

//Impervious Sanctity of Mind

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_IMPERVIOUS_SANCTITY_OF_MIND[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_IMPERVIOUS_SANCTITY_OF_MIND~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999180 SAY NAME2 @9999180 SAY UNIDENTIFIED_DESC @9999181 SAY DESC @9999181
LPF	CLONE_EFFECT	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR102~ resource = ~RACLAN1~	    END
LPF	CLONE_EFFECT	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR102~ resource = ~RATORM1~	    END
LPF	CLONE_EFFECT	   INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR405~ resource = ~RABANE2~	    END

END

//Antimagic Shell

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]WIZARD_ANTIMAGIC_SHELL[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN

LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_ANTIMAGIC_SHELL~	RET	spell_1 = spell_res	END
LAF     RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_ENCHANTED_WEAPON~	RET	spell_2	= spell_res	END

COPY_EXISTING ~%spell_1%.spl~ override
SAY NAME1 @9999190 SAY NAME2 @9999190 SAY UNIDENTIFIED_DESC @9999191 SAY DESC @9999191
LPF	DELETE_EFFECT	   STR_VAR match_opcode = 206                                                                           END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 102 match_parameter1 = 1 opcode = 181 parameter1 = 0  parameter2 = 1          END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 102 match_parameter1 = 1 opcode = 181 parameter1 = 9  parameter2 = 1          END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 102 match_parameter1 = 1 opcode = 181 parameter1 = 11 parameter2 = 1          END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 102 match_parameter1 = 1 opcode = 181 parameter1 = 35 parameter2 = 1          END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~MELFMET~   		            END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~ENEBLADE~  			        END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~FBLADE~    			        END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~GHOULT~    			        END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~CHILLT~    			        END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~PHANBLAD~  			        END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 STR_VAR match_resource = ~BCLAW~ resource = ~BLAKBLAD~  			        END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 112 opcode = 321 STR_VAR match_resource = ~BCLAW~ resource = EVAL ~%spell_2%~ END
LPF	CLONE_EFFECT 	   INT_VAR match_opcode = 123 STR_VAR match_resource = ~FSEEDS~ resource = ~STARDART~  			        END

END

//Destruction

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_DESTRUCTION[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_DESTRUCTION~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999192 SAY NAME2 @9999192 SAY UNIDENTIFIED_DESC @9999193 SAY DESC @9999193

END

//Favor of Ilmater

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_FAVOR_OF_ILMATER[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_FAVOR_OF_ILMATER~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999194 SAY NAME2 @9999194 SAY UNIDENTIFIED_DESC @9999195 SAY DESC @9999195

END

//Shield of Lathander

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_SHIELD_OF_LATHANDER[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_SHIELD_OF_LATHANDER~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999196 SAY NAME2 @9999196 SAY UNIDENTIFIED_DESC @9999197 SAY DESC @9999197
LPF	DELETE_EFFECT STR_VAR match_opcode = 324 END

END

//Greater Shield of Lathander

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_GREATER_SHIELD_OF_LATHANDER[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_GREATER_SHIELD_OF_LATHANDER~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999198 SAY NAME2 @9999198 SAY UNIDENTIFIED_DESC @9999199 SAY DESC @9999199
LPF	DELETE_EFFECT STR_VAR match_opcode = 324 END

END

//Entropy Shield

ACTION_IF	FILE_CONTAINS_EVALUATED	(~SPELL.IDS~	~[ %TAB%]CLERIC_ENTROPY_SHIELD[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
LAF 	RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~CLERIC_ENTROPY_SHIELD~	RET	spell_res	END

COPY_EXISTING ~%spell_res%.spl~ override
SAY NAME1 @9999200 SAY NAME2 @9999200 SAY UNIDENTIFIED_DESC @9999201 SAY DESC @9999201
LPF	ALTER_EFFECT INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPWI327~ resource = EVAL $res_of_label(~WIZARD_ICELANCE~)			 		    END
LPF	CLONE_EFFECT INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = ~RASUNE3~		 								 		    END
LPF	CLONE_EFFECT INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = ~RAAURI1~		 								 		    END
LPF	CLONE_EFFECT INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = ~SPPR503~		 								 		    END
LPF	CLONE_EFFECT INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = EVAL $res_of_label(~WIZARD_LANCE_OF_DISRUPTION~) 		    END
LPF	CLONE_EFFECT INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = EVAL $res_of_label(~CLERIC_ALICORN_LANCE~) 		 		END
LPF	CLONE_EFFECT INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = EVAL $res_of_label(~CLERIC_SUNSCORCH~) 		 	 		END
LPF	CLONE_EFFECT INT_VAR match_opcode = 318 STR_VAR match_resource = ~SPPR106~ resource = EVAL $res_of_label(~WIZARD_MORDENKAINENS_FORCE_MISSILES~) END

END

END

//Fix for Sanctuary (thanks for helping, Ardanis)

ACTION_FOR_EACH label IN
	~CLERIC_BLESS~
	~CLERIC_CURE_LIGHT_WOUNDS~
	~CLERIC_DETECT_EVIL~
	~CLERIC_PROTECT_FROM_EVIL~
	~CLERIC_REMOVE_FEAR~
	~CLERIC_ARMOR_OF_FAITH~
	~CLERIC_SPIRIT_WARD~
	~CLERIC_PROTECT_FROM_GOOD~
	~CLERIC_AID~
	~CLERIC_BARKSKIN~
	~CLERIC_FIND_TRAPS~
	~CLERIC_GOOD_BERRIES~
	~CLERIC_KNOW_ALIGNMENT~
	~CLERIC_RESIST_FIRE~
	~CLERIC_SLOW_POISON~
	~CLERIC_GOODBERRY~
	~CLERIC_RESIST_FIRE_AND_COLD~
	~CLERIC_CURE_MODERATE_WOUNDS~
	~CLERIC_PROTECTION_FROM_FIRE~
	~CLERIC_REMOVE_CURSE~
	~CLERIC_REMOVE_PARALYSIS~
	~CLERIC_INVISIBILITY_PURGE~
	~CLERIC_CURE_MEDIUM_WOUNDS~
	~CLERIC_CURE_DISEASE~
	~CLERIC_ZONE_OF_SWEET_AIR~
	~CLERIC_EXALTATION~
	~CLERIC_STORM_SHELL~
	~CLERIC_FAVOR_OF_ILMATER~
	~CLERIC_SPIRITUAL_CLARITY~
	~CLERIC_CURE_SERIOUS_WOUNDS~
	~CLERIC_FREE_ACTION~
	~CLERIC_NEUTRALIZE_POISON~
	~CLERIC_DEFENSIVE_HARMONY~
	~CLERIC_PROTECTION_FROM_LIGHTNING~
	~CLERIC_PROTECTION_FROM_EVIL_10_FOOT~
	~CLERIC_DEATH_WARD~
	~CLERIC_NEGATIVE_PLANE_PROTECTION~
	~CLERIC_FAR_SIGHT~
	~CLERIC_LESSER_RESTORATION~
	~CLERIC_UNFAILING_ENDURANCE~
	~CLERIC_CURE_CRITICAL_WOUNDS~
	~CLERIC_RAISE_DEAD~
	~CLERIC_TRUE_SIGHT~
	~CLERIC_IRONSKIN~
	~CLERIC_CHAOTIC_COMMANDS~
	~CLERIC_MAGIC_RESISTANCE~
	~CLERIC_MASS_CURE~
	~CLERIC_REPULSE_UNDEAD~
	~CLERIC_PIXIE_DUST~
	~CLERIC_SHIELD_OF_LATHANDER~
	~CLERIC_UNDEAD_WARD~
	~CLERIC_RECALL_SPIRIT~
	~CLERIC_HEAL~
	~CLERIC_WONDROUS_RECALL~
	~CLERIC_PHYSICAL_MIRROR~
	~CLERIC_ENTROPY_SHIELD~
	~CLERIC_SHIELD_OF_THE_ARCHONS~
	~CLERIC_REGENERATE~
	~CLERIC_RESURRECTION~
	~CLERIC_RESTORATION~
	~CLERIC_MASS_RAISE_DEAD~
	~CLERIC_IMPERVIOUS_SANCTITY_OF_MIND~
	~CLERIC_GREATER_SHIELD_OF_LATHANDER~
	~CLERIC_MIST_OF_ELDATH~
	~WIZARD_ARMOR~
	~WIZARD_FRIENDS~
	~WIZARD_IDENTIFY~
	~WIZARD_INFRAVISION~
	~WIZARD_PROTECTION_FROM_EVIL~
	~WIZARD_SHIELD~
	~WIZARD_REFLECT_IMAGE~
	~WIZARD_EXPEDITIOUS_RETREAT~
	~WIZARD_BLUR~
	~WIZARD_DETECT_EVIL~
	~WIZARD_DETECT_INVISIBILITY~
	~WIZARD_INVISIBILITY~
	~WIZARD_KNOCK~
	~WIZARD_KNOW_ALIGNMENT~
	~WIZARD_LUCK~
	~WIZARD_RESIST_FEAR~
	~WIZARD_MIRROR_IMAGE~
	~WIZARD_VOCALIZE~
	~WIZARD_CHAOS_SHIELD~
	~WIZARD_CATS_GRACE~
	~WIZARD_PROTECTION_FROM_PETRIFICATION~
	~WIZARD_CLAIRVOYANCE~
	~WIZARD_INVISIBILITY_10_FOOT~
	~WIZARD_NON_DETECTION~
	~WIZARD_PROTECTION_FROM_NORMAL_MISSILES~
	~WIZARD_GHOST_ARMOR~
	~WIZARD_MINOR_SPELL_DEFLECTION~
	~WIZARD_PROTECTION_FROM_FIRE~
	~WIZARD_PROTECTION_FROM_COLD~
	~WIZARD_DETECT_ILLUSION~
	~WIZARD_DIMENSION_DOOR~
	~WIZARD_IMPROVED_INVISIBILITY~
	~WIZARD_MINOR_GLOBE_OF_INVULNERABILITY~
	~WIZARD_STONE_SKIN~
	~WIZARD_REMOVE_CURSE~
	~WIZARD_SPIRIT_ARMOR~
	~WIZARD_MINOR_SEQUENCER~
	~WIZARD_FAR_SIGHT~
	~WIZARD_EYE~
	~WIZARD_EMOTION_HOPE~
	~WIZARD_EMOTION_COURAGE~
	~WIZARD_SHADOW_DOOR~
	~WIZARD_SPELL_IMMUNITY~
	~WIZARD_PROTECTION_FROM_NORMAL_WEAPONS~
	~WIZARD_PROTECTION_FROM_ELECTRICITY~
	~WIZARD_ORACLE~
	~WIZARD_PROTECTION_FROM_ACID~
	~WIZARD_SPELL_SHIELD~
	~WIZARD_MINOR_SPELL_TURNING~
	~WIZARD_CONTACT_OTHER_PLANE~
	~WIZARD_GLOBE_OF_INVULNERABILITY~
	~WIZARD_PROTECTION_FROM_MAGIC_ENERGY~
	~WIZARD_TRUE_SIGHT~
	~WIZARD_PROTECTION_FROM_MAGIC_WEAPONS~
	~WIZARD_CONTINGENCY~
	~WIZARD_SPELL_DEFLECTION~
	~WIZARD_STONE_TO_FLESH~
	~WIZARD_TROLLISH_FORTITUDE~
	~WIZARD_SPELL_TURNING~
	~WIZARD_PROTECTION_FROM_THE_ELEMENTS~
	~WIZARD_MANTLE~
	~WIZARD_SPELL_SEQUENCER~
	~WIZARD_MASS_INVISIBILITY~
	~WIZARD_LIMITED_WISH~
	~WIZARD_IMPROVED_CHAOS_SHIELD~
	~WIZARD_SEVEN_EYES~
	~WIZARD_MIND_BLANK~
	~WIZARD_PROTECTION_FROM_ENERGY~
	~WIZARD_IMPROVED_MANTLE~
	~WIZARD_SPELL_TRIGGER~
	~WIZARD_IRON_BODY~
	~WIZARD_SPELL_TRAP~
	~WIZARD_ABSOLUTE_IMMUNITY~
	~WIZARD_CHAIN_CONTINGENCY~
	~WIZARD_FREEDOM~
	~WIZARD_WISH~
	~WIZARD_IMPROVED_ALACRITY~
BEGIN
  ACTION_IF FILE_CONTAINS_EVALUATED	(~SPELL.IDS~ ~[ %TAB%]%label%[ %TAB%%WNL%%LNL%%MNL%$]~)	BEGIN
    LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = EVAL ~%label%~ RET	spell_res	END
    ACTION_IF FILE_EXISTS_IN_GAME ~%spell_res%.spl~ BEGIN
      COPY_EXISTING ~%spell_res%.spl~ override
        WRITE_BYTE 0x19 (THIS BAND 253)
      BUT_ONLY
    END
  END
END

COPY_EXISTING ~SPRA302.spl~ override
WRITE_BYTE 0x19 (THIS BAND 253)

COPY_EXISTING ~SPRA303.spl~ override
WRITE_BYTE 0x19 (THIS BAND 253)

//Fix for a bug that touches a lot of spells (Nature's Beauty, Glyph of Warding, Skull Trap and others...) - By Kjeron

ADD_PROJECTILE	~DeitiesOfFaerun\Spl\RAFix.pro~

COPY_EXISTING_REGEXP ~^.+\.\(spl\|itm\)$~ override
	READ_ASCII	0x0	 sign	(4)
	READ_LONG 	0x64 ab_off
	READ_SHORT	0x68 ab_num
	PATCH_MATCH	~%sign%~ WITH
		~SPL ~	BEGIN	SET	ab_size = 0x28	SET	pro_off = 0x26	END
		~ITM ~	BEGIN	SET	ab_size = 0x38	SET	pro_off = 0x2a	END
		DEFAULT	SET	ab_size = 0
	END
	PATCH_IF	ab_size	BEGIN
		FOR(i = 0; i < ab_num; ++i)	BEGIN
			READ_SHORT	(ab_off + i * ab_size + pro_off)	projectile	ELSE 0
			PATCH_IF	projectile = 79	BEGIN
				WRITE_SHORT (ab_off + i * ab_size + pro_off) %RAFix%
			END
		END
	END
BUT_ONLY

//Fireshield - Raduziel's PnP Version

ACTION_IF (!FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_RADUZIEL_FIRESHIELD[ %TAB%%WNL%$]~) AND !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_RADUZIEL_FIRESHIELD[ %TAB%%WNL%$]~))  BEGIN

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Fireshield\RASPFSD.spl~ ~override\RASPFSC.spl~

ADD_SPELL ~override\RASPFSC.spl~ 1 4  CLERIC_RADUZIEL_FIRESHIELD
SAY NAME1 @9999273 SAY NAME2 @9999273 SAY UNIDENTIFIED_DESC @9999274 SAY DESC @9999274
TEXT_SPRINT	spell_res ~%DEST_RES%~ TO_UPPER	spell_res WRITE_SHORT 0x01c 2 WRITE_LONG 0x034 4 WRITE_ASCIIE 0x3a ~%spell_res%C~ #8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Fireshield\RASPFSDA.BAM~ ~override\%spell_res%A.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Fireshield\RASPFSDB.BAM~ ~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Fireshield\RASPFSDC.BAM~ ~override\%spell_res%C.BAM~

CLEAR_ARRAYS

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Fireshield\RASPFSD.spl~ ~override\RASPFSW.spl~

ADD_SPELL ~override\RASPFSW.spl~ 2 4  WIZARD_RADUZIEL_FIRESHIELD
SAY NAME1 @9999273 SAY NAME2 @9999273 SAY UNIDENTIFIED_DESC @9999275 SAY DESC @9999275
TEXT_SPRINT	spell_res ~%DEST_RES%~ TO_UPPER	spell_res WRITE_SHORT 0x01c 1 WRITE_LONG 0x034 4 WRITE_ASCIIE 0x3a ~%spell_res%C~ #8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Fireshield\RASPFSDA.BAM~ ~override\%spell_res%A.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Fireshield\RASPFSDB.BAM~ ~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Fireshield\RASPFSDC.BAM~ ~override\%spell_res%C.BAM~

LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~WIZARD_FIRE_SHIELD_BLUE~ RET spell_1 = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~WIZARD_FIRE_SHIELD_RED~  RET spell_2 = spell_res END

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Fireshield\RASPFSD.2da~  override

APPEND ~RASPFSD.2da~ ~BLUE %spell_1% 3~
APPEND ~RASPFSD.2da~ ~RED  %spell_2% 3~

COPY_EXISTING ~RASPFSD.2da~ override
PRETTY_PRINT_2DA

ACTION_IF GAME_IS ~iwdee~ BEGIN

APPEND ~hidespl.2da~ ~%spell_1%  1 0~
APPEND ~hidespl.2da~ ~%spell_2%  1 0~

END

ACTION_IF !GAME_IS ~iwdee~ BEGIN

APPEND ~hidespl.2da~ ~%spell_1%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_2%  1 0 0~

END

//Thanks for helping me conserve my sanity, Kjeron.

COPY_EXISTING ~%spell_1%.spl~ override
LPF ADD_SPELL_EFFECT   INT_VAR opcode = 321 target = 1 timing = 1 STR_VAR resource = EVAL ~%spell_2%~ insert_point = 0 END
LPF	CLONE_EFFECT       INT_VAR match_opcode = 28 opcode = 30 END
LPF	CLONE_EFFECT       INT_VAR match_opcode = 85 opcode = 84 END
	READ_LONG	0x64	ab_off
	READ_SHORT	0x68	ab_num
	READ_LONG	0x6a	fx_off
	FOR (i = 0; i < ab_num; ++i) BEGIN
		READ_SHORT (ab_off + i * 0x28 + 0x1e) fx_num
		READ_SHORT (ab_off + i * 0x28 + 0x20) fx_idx
		FOR (j = 0; j < fx_num; ++j) BEGIN
			READ_SHORT	(fx_off + (j + fx_idx) * 0x30) opcode
			PATCH_MATCH SHORT_AT (fx_off + (j + fx_idx) * 0x30) WITH
				30 84 BEGIN	WRITE_LONG (fx_off + (j + fx_idx) * 0x30 + 0x4) ~-100~ END
				DEFAULT
			END
		END	
	END
BUT_ONLY IF_EXISTS

COPY_EXISTING ~%spell_2%.spl~ override
LPF ADD_SPELL_EFFECT   INT_VAR opcode = 321 target = 1 timing = 1 STR_VAR resource = EVAL ~%spell_1%~ insert_point = 0 END
LPF	CLONE_EFFECT       INT_VAR match_opcode = 30 opcode = 28 END
LPF	CLONE_EFFECT       INT_VAR match_opcode = 84 opcode = 85 END
	READ_LONG	0x64	ab_off
	READ_SHORT	0x68	ab_num
	READ_LONG	0x6a	fx_off
	FOR (i = 0; i < ab_num; ++i) BEGIN
		READ_SHORT (ab_off + i * 0x28 + 0x1e) fx_num
		READ_SHORT (ab_off + i * 0x28 + 0x20) fx_idx
		FOR (j = 0; j < fx_num; ++j) BEGIN
			READ_SHORT	(fx_off + (j + fx_idx) * 0x30) opcode
			PATCH_MATCH SHORT_AT (fx_off + (j + fx_idx) * 0x30) WITH
				28 85 BEGIN	WRITE_LONG (fx_off + (j + fx_idx) * 0x30 + 0x4) ~-100~ END
				DEFAULT
			END
		END	
	END
BUT_ONLY IF_EXISTS
	
CLEAR_ARRAYS

END

//Emotion - Raduziel's PnP Version

ACTION_IF (!FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_RADUZIEL_EMOTION[ %TAB%%WNL%$]~) AND !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_RADUZIEL_EMOTION[ %TAB%%WNL%$]~))  BEGIN

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Emotion\RASPEMO.spl~ ~override\RASPEMC.spl~

ADD_SPELL ~override\RASPEMC.spl~ 1 4  CLERIC_RADUZIEL_EMOTION
SAY NAME1 @9999276 SAY NAME2 @9999276 SAY UNIDENTIFIED_DESC @9999277 SAY DESC @9999277
TEXT_SPRINT	spell_res ~%DEST_RES%~ TO_UPPER	spell_res WRITE_SHORT 0x01c 2 WRITE_LONG 0x034 4 WRITE_ASCIIE 0x3a ~%spell_res%C~ #8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Emotion\RASPEMOA.BAM~ ~override\%spell_res%A.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Emotion\RASPEMOB.BAM~ ~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Emotion\RASPEMOC.BAM~ ~override\%spell_res%C.BAM~

CLEAR_ARRAYS

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Emotion\RASPEMO.spl~ ~override\RASPEMW.spl~

ADD_SPELL ~override\RASPEMW.spl~ 2 4  WIZARD_RADUZIEL_EMOTION
SAY NAME1 @9999276 SAY NAME2 @9999276 SAY UNIDENTIFIED_DESC @9999278 SAY DESC @9999278
TEXT_SPRINT	spell_res ~%DEST_RES%~ TO_UPPER	spell_res WRITE_SHORT 0x01c 1 WRITE_LONG 0x034 4 WRITE_ASCIIE 0x3a ~%spell_res%C~ #8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Emotion\RASPEMOA.BAM~ ~override\%spell_res%A.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Emotion\RASPEMOB.BAM~ ~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Emotion\RASPEMOC.BAM~ ~override\%spell_res%C.BAM~

LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~WIZARD_EMOTION_HOPELESSNESS~ RET spell_1  = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~WIZARD_EMOTION_HOPE~         RET spell_2  = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~WIZARD_EMOTION_FEAR~         RET spell_3  = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~WIZARD_EMOTION_COURAGE~      RET spell_4  = spell_res END

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Emotion\RASPEMO.2da~  override

APPEND ~RASPEMO.2da~ ~HOPELESSNESS %spell_1% 3~
APPEND ~RASPEMO.2da~ ~HOPE         %spell_2% 3~
APPEND ~RASPEMO.2da~ ~FEAR         %spell_3% 3~
APPEND ~RASPEMO.2da~ ~COURAGE      %spell_4% 3~

COPY_EXISTING ~RASPEMO.2da~ override
PRETTY_PRINT_2DA

ACTION_IF GAME_IS ~iwdee~ BEGIN

APPEND ~hidespl.2da~ ~%spell_1%  1 0~
APPEND ~hidespl.2da~ ~%spell_2%  1 0~
APPEND ~hidespl.2da~ ~%spell_3%  1 0~
APPEND ~hidespl.2da~ ~%spell_4%  1 0~

END

ACTION_IF !GAME_IS ~iwdee~ BEGIN

APPEND ~hidespl.2da~ ~%spell_1%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_2%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_3%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_4%  1 0 0~

END

CLEAR_ARRAYS

END

//Symbol - Raduziel's PnP version

ACTION_IF (!FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_RADUZIEL_SYMBOL[ %TAB%%WNL%$]~) AND !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]WIZARD_RADUZIEL_SYMBOL[ %TAB%%WNL%$]~))  BEGIN

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Symbol\RASPSYM.spl~ ~override\RASPSYC.spl~

ADD_SPELL ~override\RASPSYC.spl~ 1 7  CLERIC_RADUZIEL_SYMBOL
SAY NAME1 @9999279 SAY NAME2 @9999279 SAY UNIDENTIFIED_DESC @9999280 SAY DESC @9999280
TEXT_SPRINT	spell_res ~%DEST_RES%~ TO_UPPER	spell_res WRITE_SHORT 0x01c 2 WRITE_LONG 0x034 7 WRITE_ASCIIE 0x3a ~%spell_res%C~ #8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Symbol\RASPSYMA.BAM~ ~override\%spell_res%A.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Symbol\RASPSYMB.BAM~ ~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Symbol\RASPSYMC.BAM~ ~override\%spell_res%C.BAM~

CLEAR_ARRAYS

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Symbol\RASPSYM.spl~ ~override\RASPSYW.spl~

ADD_SPELL ~override\RASPSYW.spl~ 2 8  WIZARD_RADUZIEL_SYMBOL
SAY NAME1 @9999279 SAY NAME2 @9999279 SAY UNIDENTIFIED_DESC @9999281 SAY DESC @9999281
TEXT_SPRINT	spell_res ~%DEST_RES%~ TO_UPPER	spell_res WRITE_SHORT 0x01c 1 WRITE_LONG 0x034 8 WRITE_ASCIIE 0x3a ~%spell_res%C~ #8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Symbol\RASPSYMA.BAM~ ~override\%spell_res%A.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Symbol\RASPSYMB.BAM~ ~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun\Lib\Spheres\Import\Symbol\RASPSYMC.BAM~ ~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun\Lib\Spheres\Import\Symbol\RASPSYM.2da~  override

LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~WIZARD_SYMBOL_FEAR~            RET spell_1 = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~WIZARD_SYMBOL_STUN~            RET spell_2 = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~WIZARD_SYMBOL_DEATH~           RET spell_3 = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~CLERIC_SYMBOL_FEAR~            RET spell_4 = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~CLERIC_SYMBOL_OF_PAIN~         RET spell_5 = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~CLERIC_SYMBOL_OF_HOPELESSNESS~ RET spell_6 = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~CLERIC_SYMBOL_STUN~            RET spell_7 = spell_res END
LAF RES_NUM_OF_SPELL_NAME STR_VAR spell_name = ~CLERIC_SYMBOL_DEATH~           RET spell_8 = spell_res END

APPEND ~RASPSYM.2da~ ~FEAR         %spell_4% 3~
APPEND ~RASPSYM.2da~ ~PAIN         %spell_5% 3~
APPEND ~RASPSYM.2da~ ~HOPELESSNESS %spell_6% 3~
APPEND ~RASPSYM.2da~ ~STUN         %spell_7% 3~
APPEND ~RASPSYM.2da~ ~DEATH        %spell_8% 3~

COPY_EXISTING ~RASPSYM.2da~ override
PRETTY_PRINT_2DA

ACTION_IF GAME_IS ~iwdee~ BEGIN

APPEND ~hidespl.2da~ ~%spell_1%  1 0~
APPEND ~hidespl.2da~ ~%spell_2%  1 0~
APPEND ~hidespl.2da~ ~%spell_3%  1 0~
APPEND ~hidespl.2da~ ~%spell_4%  1 0~
APPEND ~hidespl.2da~ ~%spell_5%  1 0~
APPEND ~hidespl.2da~ ~%spell_6%  1 0~
APPEND ~hidespl.2da~ ~%spell_7%  1 0~
APPEND ~hidespl.2da~ ~%spell_8%  1 0~

END

ACTION_IF !GAME_IS ~iwdee~ BEGIN

APPEND ~hidespl.2da~ ~%spell_1%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_2%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_3%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_4%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_5%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_6%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_7%  1 0 0~
APPEND ~hidespl.2da~ ~%spell_8%  1 0 0~

END

COPY_EXISTING ~ICEGLYP.pro~ override
WRITE_SHORT 0x0206 256

COPY_EXISTING ~ICGHIT.pro~  override
WRITE_SHORT 0x0206 256

ACTION_FOR_EACH spell IN ~%spell_1%~ ~%spell_2%~ ~%spell_3%~ ~%spell_4%~ ~%spell_7%~ ~%spell_8%~ BEGIN

COPY_EXISTING ~%spell%.spl~ override
READ_LONG   0x64 abil_off ELSE 0
READ_SHORT  0x68 abil_num ELSE 0
 FOR (index = 0 ; index < abil_num ; ++index) BEGIN
   WRITE_SHORT (abil_off + 0x12 + (0x28 * index)) 3
 END

END

CLEAR_ARRAYS

END

//Conjure Water Elemental - Raduziel

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_RADUZIEL_CONJURE_WATER_ELEMENTAL[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_summon_table STR_VAR descript = "WATER_ELEMENTAL_RADUZIEL" 2da_file = RAELEMW RET RAELEMW = table END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/ConjureWaterElemental/SPPRRA1.spl~ 1 6 CLERIC_RADUZIEL_CONJURE_WATER_ELEMENTAL
SAY NAME1 @9999141 SAY NAME2 @9999141 SAY UNIDENTIFIED_DESC @9999142 SAY DESC @9999142
TEXT_SPRINT	spell_res ~%DEST_RES%~ TO_UPPER	spell_res WRITE_SHORT 0x01c 2
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT	   INT_VAR match_opcode = 331 parameter2 = RAELEMW END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureWaterElemental/SPPRRA1B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureWaterElemental/SPPRRA1C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureWaterElemental/RAELEMW.2DA~	override

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureWaterElemental/RA12WATR.CRE~	override
SAY NAME1 @9999143 SAY NAME2 @9999143

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureWaterElemental/RA16WATR.CRE~	override
SAY NAME1 @9999143 SAY NAME2 @9999143

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureWaterElemental/RA24WATR.CRE~	override
SAY NAME1 @9999143 SAY NAME2 @9999143

END

//Conjure Air Elemental - Raduziel

ACTION_IF !FILE_CONTAINS_EVALUATED(~SPELL.IDS~ ~[ %TAB%]CLERIC_RADUZIEL_CONJURE_AIR_ELEMENTAL[ %TAB%%WNL%$]~) BEGIN

LAF cd_new_summon_table STR_VAR descript = "AIR_ELEMENTAL_RADUZIEL" 2da_file = RAELEMA RET RAELEMA = table END
ADD_SPELL ~DeitiesofFaerun/Lib/Spheres/Import/ConjureAirElemental/SPPRRA2.spl~ 1 6 CLERIC_RADUZIEL_CONJURE_AIR_ELEMENTAL
SAY NAME1 @9999228 SAY NAME2 @9999228 SAY UNIDENTIFIED_DESC @9999229 SAY DESC @9999229
TEXT_SPRINT	spell_res ~%DEST_RES%~ TO_UPPER	spell_res WRITE_SHORT 0x01c 2
WRITE_ASCIIE	0x3a ~%spell_res%C~	#8
LPF	ALTER_SPELL_HEADER STR_VAR icon = EVAL ~%spell_res%B~	END
LPF	ALTER_EFFECT	   STR_VAR silent = 1 match_resource = EVAL ~%SOURCE_RES%~	  resource = EVAL ~%spell_res%~	    END
LPF ALTER_EFFECT	   INT_VAR match_opcode = 331 parameter2 = RAELEMA END

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureAirElemental/SPPRRA2B.BAM~	~override\%spell_res%B.BAM~
COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureAirElemental/SPPRRA2C.BAM~	~override\%spell_res%C.BAM~

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureAirElemental/RAELEMA.2DA~	override

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureAirElemental/RA12AIR.CRE~	override
SAY NAME1 @9999230 SAY NAME2 @9999230

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureAirElemental/RA16AIR.CRE~	override
SAY NAME1 @9999230 SAY NAME2 @9999230

COPY ~DeitiesofFaerun/Lib/Spheres/Import/ConjureAirElemental/RA24AIR.CRE~	override
SAY NAME1 @9999230 SAY NAME2 @9999230

END

//Elemental Changes

COPY_EXISTING_REGEXP ~.*\.cre~ override
	READ_LONG	0x028	animation
		PATCH_IF (animation = 29472) OR (animation = 29473) BEGIN /*Air Elemental*/
			WRITE_BYTE 0x063  50
			WRITE_BYTE 0x05b  50
			WRITE_BYTE 0x05a  50
			WRITE_BYTE 0x05f  50
		END
		PATCH_IF (animation = 29440) OR (animation = 29441) OR (animation = 57931) BEGIN /*Earth Elemental*/
			WRITE_BYTE 0x05b 100
		END
		PATCH_IF (animation = 57933) OR (animation = 57964) BEGIN /*Water Elemental*/
			WRITE_BYTE 0x05b  ~-100~
			WRITE_BYTE 0x05a    50
			WRITE_BYTE 0x05f    50
			WRITE_BYTE 0x05c    50
		END
BUT_ONLY_IF_IT_CHANGES
	
//Respecting my OCD for aligned things

COPY_EXISTING ~smtables.2da~ override
PRETTY_PRINT_2DA

COPY_EXISTING ~hidespl.2da~  override
PRETTY_PRINT_2DA

//New scrolls for Wizards (Emotion, Fireshield and Symbol)

LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_RADUZIEL_FIRESHIELD~ RET spell_1 = spell_res END
LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_RADUZIEL_EMOTION~    RET spell_2 = spell_res END
LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_RADUZIEL_SYMBOL~     RET spell_3 = spell_res END

COPY_EXISTING ~SCRL1W.itm~ ~override/RASCFSD.itm~
SAY NAME1 @9999275 SAY NAME2 @9999275 SAY UNIDENTIFIED_DESC @9999277 SAY DESC @9999277
LPF ALTER_ITEM_EFFECT INT_VAR silent = 1 check_headers = 1 match_opcode = 146 STR_VAR resource = EVAL ~%spell_1%~  END
LPF ALTER_ITEM_EFFECT INT_VAR silent = 1 check_headers = 1 match_opcode = 147 STR_VAR resource = EVAL ~%spell_1%~  END
LPF ALTER_ITEM_EFFECT INT_VAR silent = 1 check_headers = 1 match_opcode = 148 STR_VAR resource = EVAL ~%spell_1%~  END
LPF ALTER_ITEM_HEADER INT_VAR                                                 STR_VAR icon     = EVAL ~%spell_1%A~ END
WRITE_ASCIIE 0x3a ~%spell_1%A~ #8

COPY_EXISTING ~SCRL1W.itm~ ~override/RASCEMO.itm~
SAY NAME1 @9999278 SAY NAME2 @9999278 SAY UNIDENTIFIED_DESC @9999280 SAY DESC @9999280
LPF ALTER_ITEM_EFFECT INT_VAR silent = 1 check_headers = 1 match_opcode = 146 STR_VAR resource = EVAL ~%spell_2%~  END
LPF ALTER_ITEM_EFFECT INT_VAR silent = 1 check_headers = 1 match_opcode = 147 STR_VAR resource = EVAL ~%spell_2%~  END
LPF ALTER_ITEM_EFFECT INT_VAR silent = 1 check_headers = 1 match_opcode = 148 STR_VAR resource = EVAL ~%spell_2%~  END
LPF ALTER_ITEM_HEADER INT_VAR                                                 STR_VAR icon     = EVAL ~%spell_2%A~ END
WRITE_ASCIIE 0x3a ~%spell_2%A~ #8

COPY_EXISTING ~SCRLB1.itm~ ~override/RASCSYM.itm~
SAY NAME1 @9999281 SAY NAME2 @9999281 SAY UNIDENTIFIED_DESC @9999283 SAY DESC @9999283
LPF ALTER_ITEM_EFFECT INT_VAR silent = 1 check_headers = 1 match_opcode = 146 STR_VAR resource = EVAL ~%spell_3%~  END
LPF ALTER_ITEM_EFFECT INT_VAR silent = 1 check_headers = 1 match_opcode = 147 STR_VAR resource = EVAL ~%spell_3%~  END
LPF ALTER_ITEM_EFFECT INT_VAR silent = 1 check_headers = 1 match_opcode = 148 STR_VAR resource = EVAL ~%spell_3%~  END
LPF ALTER_ITEM_HEADER INT_VAR                                                 STR_VAR icon     = EVAL ~%spell_3%A~ END
WRITE_ASCIIE 0x3a ~%spell_3%A~ #8

CLEAR_ARRAYS

ACTION_CLEAR_ARRAY	fireshield	ACTION_CLEAR_ARRAY	emotion	ACTION_CLEAR_ARRAY	symbol
	ACTION_IF FILE_CONTAINS_EVALUATED (~SPELL.IDS~ ~[ %TAB%]WIZARD_FIRE_SHIELD_BLUE[ %TAB%%WNL%%LNL%%MNL%$]~)          BEGIN
		LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_FIRE_SHIELD_BLUE~     RET $fireshield(~blue~)      = spell_res END
	END
	ACTION_IF FILE_CONTAINS_EVALUATED (~SPELL.IDS~ ~[ %TAB%]WIZARD_FIRE_SHIELD_RED[ %TAB%%WNL%%LNL%%MNL%$]~)	       BEGIN
		LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_FIRE_SHIELD_RED~      RET $fireshield(~red~)       = spell_res	END
	END
	ACTION_IF FILE_CONTAINS_EVALUATED (~SPELL.IDS~ ~[ %TAB%]SR_FIRESHIELD_RED[ %TAB%%WNL%%LNL%%MNL%$]~)	               BEGIN
		LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~SR_FIRESHIELD_RED~           RET $fireshield(~sr_red~)    = spell_res	END
	END
	ACTION_IF FILE_CONTAINS_EVALUATED (~SPELL.IDS~ ~[ %TAB%]WIZARD_EMOTION_HOPELESSNESS[ %TAB%%WNL%%LNL%%MNL%$]~)	   BEGIN
		LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_EMOTION_HOPELESSNESS~ RET $emotion(~hopelessness~) = spell_res END
	END
	ACTION_IF FILE_CONTAINS_EVALUATED (~SPELL.IDS~ ~[ %TAB%]WIZARD_EMOTION_HOPE[ %TAB%%WNL%%LNL%%MNL%$]~)	           BEGIN
		LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_EMOTION_HOPE~         RET $emotion(~hope~)         = spell_res	END
	END
	ACTION_IF FILE_CONTAINS_EVALUATED (~SPELL.IDS~ ~[ %TAB%]WIZARD_EMOTION_COURAGE[ %TAB%%WNL%%LNL%%MNL%$]~)	       BEGIN
		LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_EMOTION_COURAGE~      RET $emotion(~courage~)      = spell_res END
	END
	ACTION_IF FILE_CONTAINS_EVALUATED (~SPELL.IDS~ ~[ %TAB%]WIZARD_EMOTION_FEAR[ %TAB%%WNL%%LNL%%MNL%$]~)	           BEGIN
		LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_EMOTION_FEAR~         RET $emotion(~fear~)         = spell_res	END
	END
	ACTION_IF FILE_CONTAINS_EVALUATED (~SPELL.IDS~ ~[ %TAB%]WIZARD_SYMBOL_DEATH[ %TAB%%WNL%%LNL%%MNL%$]~)	           BEGIN
		LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_SYMBOL_DEATH~         RET $symbol(~death~)         = spell_res	END
	END
	ACTION_IF FILE_CONTAINS_EVALUATED (~SPELL.IDS~ ~[ %TAB%]WIZARD_SYMBOL_STUN[ %TAB%%WNL%%LNL%%MNL%$]~)	           BEGIN
		LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_SYMBOL_STUN~          RET $symbol(~stun~)          = spell_res	END
	END
	ACTION_IF FILE_CONTAINS_EVALUATED (~SPELL.IDS~ ~[ %TAB%]WIZARD_SYMBOL_FEAR[ %TAB%%WNL%%LNL%%MNL%$]~)	           BEGIN
		LAF   RES_NUM_OF_SPELL_NAME STR_VAR	spell_name = ~WIZARD_SYMBOL_FEAR~          RET $symbol(~fear~)          = spell_res	END
	END
	COPY_EXISTING_REGEXP	~^.+\.itm$~	override
		PATCH_IF	SHORT_AT 0x1c = 11	BEGIN
			READ_LONG	0x64	ab_off
			READ_SHORT	0x68	ab_num
			READ_LONG	0x6a	fx_off
			FOR (i = 0; i < ab_num; ++i)	BEGIN
				READ_SHORT	(ab_off + i * 0x38 + 0x1e)	fx_num
				READ_SHORT	(ab_off + i * 0x38 + 0x20)	fx_idx
				FOR	(j = 0; j < fx_num; ++j)	BEGIN
					PATCH_IF	SHORT_AT (fx_off + (j + fx_idx) * 0x30) = 147	BEGIN
						READ_ASCII	(fx_off + (j + fx_idx) * 0x30 + 0x14) resource	TO_UPPER resource
						PATCH_MATCH	~%resource%~ WITH
							$fireshield(~red~)	$fireshield(~blue~)	 $fireshield(~sr_red~)                  BEGIN
								TEXT_SPRINT $learn(~%SOURCE_RES%~) ~fireshield~
							END
							$emotion(~hopelessness~) $emotion(~hope~) $emotion(~courage~) $emotion(~fear~)	BEGIN
								TEXT_SPRINT $learn(~%SOURCE_RES%~) ~emotion~
							END
							$symbol(~death~) $symbol(~stun~) $symbol(~fear~)	                            BEGIN
								TEXT_SPRINT $learn(~%SOURCE_RES%~) ~symbol~
							END
							DEFAULT
						END
					END
				END
			END
		END
	BUT_ONLY
	
	COPY_EXISTING_REGEXP ~^.+\.cre$~ override
		fireshield = 0	emotion = 0	symbol = 0
		READ_LONG  0x2bc item_off
		READ_SHORT 0x2c0 item_num
		FOR (i = 0; i < item_num; ++i) BEGIN
			READ_ASCII	(item_off + i * 0x14) resource TO_UPPER	resource
			TEXT_SPRINT	type $learn(~%resource%~)	
			PATCH_MATCH	~%type%~ WITH
				~^fireshield$~	BEGIN WRITE_ASCII (item_off + i * 0x14) ~RASCFSD~ #8 END
				~^emotion$~	    BEGIN WRITE_ASCII (item_off + i * 0x14) ~RASCEMO~ #8 END
				~^symbol$~	    BEGIN WRITE_ASCII (item_off + i * 0x14) ~RASCSYM~ #8 END
				DEFAULT
			END
		END
	BUT_ONLY
	
	COPY_EXISTING_REGEXP ~^.+\.are$~ override
		fireshield = 0 emotion = 0 symbol = 0
		READ_LONG  0x70	cont_off
		READ_SHORT 0x74	cont_num
		READ_SHORT 0x78	item_off
		FOR (i = 0; i < cont_num; ++i) BEGIN
			READ_LONG	(cont_off + i * 0xc0 + 0x40) item_idx
			READ_LONG	(cont_off + i * 0xc0 + 0x44) item_num
			FOR	(j = 0; j < item_num; ++j)	BEGIN
				READ_ASCII	(item_off + (j + item_idx) * 0x14) resource	TO_UPPER resource
				TEXT_SPRINT	type $learn(~%resource%~)	
				PATCH_MATCH	~%type%~ WITH
					~^fireshield$~	BEGIN WRITE_ASCII (item_off + (j + item_idx) * 0x14) ~RASCFSD~ #8 END
					~^emotion$~	    BEGIN WRITE_ASCII (item_off + (j + item_idx) * 0x14) ~RASCEMO~ #8 END
					~^symbol$~	    BEGIN WRITE_ASCII (item_off + (j + item_idx) * 0x14) ~RASCSYM~ #8 END
					DEFAULT
				END
			END
		END
	BUT_ONLY
		
	COPY_EXISTING_REGEXP ~^.+\.sto$~ override
		fireshield = 0 emotion = 0 symbol = 0
		READ_LONG  0x34	item_off
		READ_SHORT 0x38	item_num
		FOR (i = 0; i < item_num; ++i) BEGIN
			READ_ASCII	(item_off + i * 0x1c) resource TO_UPPER	resource
			TEXT_SPRINT	type $learn(~%resource%~)	
			PATCH_MATCH	~%type%~ WITH
				~^fireshield$~  BEGIN ++fireshield	END
				~^emotion$~	    BEGIN ++emotion	    END
				~^symbol$~	    BEGIN ++symbol	    END
				DEFAULT
			END
		END
		PATCH_IF fireshield BEGIN
			ADD_STORE_ITEM	~RASCFSD~ LAST #1 #0 #0 ~IDENTIFIED~ #2
			PHP_EACH learn AS base => sub BEGIN	PATCH_IF	~%sub%~ STRING_EQUAL ~fireshield~ BEGIN	REMOVE_STORE_ITEM ~%base%~ END END
		END
		PATCH_IF emotion	BEGIN
			ADD_STORE_ITEM	~RASCEMO~ LAST #1 #0 #0 ~IDENTIFIED~ #2
			PHP_EACH learn AS base => sub BEGIN	PATCH_IF	~%sub%~ STRING_EQUAL ~emotion~    BEGIN	REMOVE_STORE_ITEM ~%base%~ END END
		END
		PATCH_IF symbol     BEGIN
			ADD_STORE_ITEM	~RASCSYM~ LAST #1 #0 #0 ~IDENTIFIED~ #2
			PHP_EACH learn AS base => sub BEGIN	PATCH_IF	~%sub%~ STRING_EQUAL ~symbol~     BEGIN	REMOVE_STORE_ITEM ~%base%~ END END
		END
	BUT_ONLY

//EoF